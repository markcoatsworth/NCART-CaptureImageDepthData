<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNI 2.0: OpenNI.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="OpenNILogo.bmp"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNI 2.0
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">OpenNI.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_open_n_i_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">*                                                                            *</span>
<a name="l00003"></a>00003 <span class="comment">*  OpenNI 2.x Alpha                                                          *</span>
<a name="l00004"></a>00004 <span class="comment">*  Copyright (C) 2012 PrimeSense Ltd.                                        *</span>
<a name="l00005"></a>00005 <span class="comment">*                                                                            *</span>
<a name="l00006"></a>00006 <span class="comment">*  This file is part of OpenNI.                                              *</span>
<a name="l00007"></a>00007 <span class="comment">*                                                                            *</span>
<a name="l00008"></a>00008 <span class="comment">*  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);           *</span>
<a name="l00009"></a>00009 <span class="comment">*  you may not use this file except in compliance with the License.          *</span>
<a name="l00010"></a>00010 <span class="comment">*  You may obtain a copy of the License at                                   *</span>
<a name="l00011"></a>00011 <span class="comment">*                                                                            *</span>
<a name="l00012"></a>00012 <span class="comment">*      http://www.apache.org/licenses/LICENSE-2.0                            *</span>
<a name="l00013"></a>00013 <span class="comment">*                                                                            *</span>
<a name="l00014"></a>00014 <span class="comment">*  Unless required by applicable law or agreed to in writing, software       *</span>
<a name="l00015"></a>00015 <span class="comment">*  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,         *</span>
<a name="l00016"></a>00016 <span class="comment">*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  *</span>
<a name="l00017"></a>00017 <span class="comment">*  See the License for the specific language governing permissions and       *</span>
<a name="l00018"></a>00018 <span class="comment">*  limitations under the License.                                            *</span>
<a name="l00019"></a>00019 <span class="comment">*                                                                            *</span>
<a name="l00020"></a>00020 <span class="comment">*****************************************************************************/</span>
<a name="l00021"></a>00021 <span class="preprocessor">#ifndef _OPENNI_H_</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define _OPENNI_H_</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;OniPlatform.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;OniProperties.h&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="_oni_enums_8h.html">OniEnums.h</a>&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;OniCAPI.h&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;OniCProperties.h&quot;</span>
<a name="l00030"></a>00030 
<a name="l00034"></a><a class="code" href="namespaceopenni.html">00034</a> <span class="keyword">namespace </span>openni
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036 
<a name="l00038"></a><a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">00038</a> <span class="keyword">typedef</span> uint16_t                <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>;
<a name="l00040"></a><a class="code" href="namespaceopenni.html#a15bcac1ff77c313557dd28804c31c4ff">00040</a> <span class="keyword">typedef</span> uint16_t                <a class="code" href="namespaceopenni.html#a15bcac1ff77c313557dd28804c31c4ff">Grayscale16Pixel</a>;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="comment">// structs</span>
<a name="l00043"></a><a class="code" href="structopenni_1_1_version.html#aecc77ce1b6aa5866c7d5013d37fb1a5a">00043</a> _ONI_DECLARE_VERSION(<a class="code" href="structopenni_1_1_version.html">Version</a>);
<a name="l00044"></a><a class="code" href="structopenni_1_1_r_g_b888_pixel.html#a386473055de76efb74b8fb820d39e9a1">00044</a> _ONI_DECLARE_RGB888_PIXEL(<a class="code" href="structopenni_1_1_r_g_b888_pixel.html">RGB888Pixel</a>);
<a name="l00045"></a><a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#a877023a8447a329874a75cad01e38aed">00045</a> _ONI_DECLARE_YUV422_PIXEL(<a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html">YUV422DoublePixel</a>);
<a name="l00046"></a>00046 
<a name="l00048"></a>00048 <span class="preprocessor">#if ONI_PLATFORM != ONI_PLATFORM_WIN32</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wunused-variable&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic push</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00052"></a><a class="code" href="namespaceopenni.html#ad917a99196968a7d3ce9e8ca0b222953">00052</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespaceopenni.html#ad917a99196968a7d3ce9e8ca0b222953">ANY_DEVICE</a> = NULL;
<a name="l00053"></a>00053 <span class="preprocessor">#if ONI_PLATFORM != ONI_PLATFORM_WIN32</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic pop</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00061"></a>00061 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00062"></a><a class="code" href="classopenni_1_1_array.html">00062</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_array.html">Array</a>
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064 <span class="keyword">public</span>:
<a name="l00068"></a><a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">00068</a>     <a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">Array</a>() : m_data(NULL), m_count(0), m_owner(false) {}
<a name="l00069"></a>00069 
<a name="l00077"></a><a class="code" href="classopenni_1_1_array.html#a4db39602aa6df3e6fa41d8d364a28f65">00077</a>     <a class="code" href="classopenni_1_1_array.html#a4db39602aa6df3e6fa41d8d364a28f65">Array</a>(<span class="keyword">const</span> T* data, <span class="keywordtype">int</span> count) : m_owner(false) { _setData(data, count); }
<a name="l00078"></a>00078 
<a name="l00082"></a><a class="code" href="classopenni_1_1_array.html#ac318cd0a03d863ea861791bb3f647253">00082</a>     <a class="code" href="classopenni_1_1_array.html#ac318cd0a03d863ea861791bb3f647253">~Array</a>()
<a name="l00083"></a>00083     {
<a name="l00084"></a>00084         clear();
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086 
<a name="l00091"></a><a class="code" href="classopenni_1_1_array.html#a92cfa92a6569dbc4f9421f3aa13abe25">00091</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_array.html#a92cfa92a6569dbc4f9421f3aa13abe25">getSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_count; }
<a name="l00092"></a>00092 
<a name="l00096"></a><a class="code" href="classopenni_1_1_array.html#ad99996179b72b67eab31628dd21592e1">00096</a>     <span class="keyword">const</span> T&amp; <a class="code" href="classopenni_1_1_array.html#ad99996179b72b67eab31628dd21592e1">operator[]</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_data[index];}
<a name="l00097"></a>00097 
<a name="l00108"></a>00108     <span class="keywordtype">void</span> _setData(<span class="keyword">const</span> T* data, <span class="keywordtype">int</span> count, <span class="keywordtype">bool</span> isOwner = <span class="keyword">false</span>)
<a name="l00109"></a>00109     {
<a name="l00110"></a>00110         clear();
<a name="l00111"></a>00111         m_count = count;
<a name="l00112"></a>00112         m_owner = isOwner;
<a name="l00113"></a>00113         <span class="keywordflow">if</span> (!isOwner)
<a name="l00114"></a>00114         {
<a name="l00115"></a>00115             m_data = data;
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117         <span class="keywordflow">else</span>
<a name="l00118"></a>00118         {
<a name="l00119"></a>00119             m_data = <span class="keyword">new</span> T[count];
<a name="l00120"></a>00120             memcpy((<span class="keywordtype">void</span>*)m_data, data, count*<span class="keyword">sizeof</span>(T));
<a name="l00121"></a>00121         }
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="keyword">private</span>:
<a name="l00125"></a>00125     <a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">Array</a>(<span class="keyword">const</span> Array&lt;T&gt;&amp;);
<a name="l00126"></a>00126     Array&lt;T&gt;&amp; operator=(<span class="keyword">const</span> Array&lt;T&gt;&amp;);
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="keywordtype">void</span> clear()
<a name="l00129"></a>00129     {
<a name="l00130"></a>00130         <span class="keywordflow">if</span> (m_owner &amp;&amp; m_data != NULL)
<a name="l00131"></a>00131             <span class="keyword">delete</span> []m_data;
<a name="l00132"></a>00132         m_owner = <span class="keyword">false</span>;
<a name="l00133"></a>00133         m_data = NULL;
<a name="l00134"></a>00134         m_count = 0;
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137     <span class="keyword">const</span> T* m_data;
<a name="l00138"></a>00138     <span class="keywordtype">int</span> m_count;
<a name="l00139"></a>00139     <span class="keywordtype">bool</span> m_owner;
<a name="l00140"></a>00140 };
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">// Forward declaration of all</span>
<a name="l00143"></a>00143 <span class="keyword">class </span>SensorInfo;
<a name="l00144"></a>00144 <span class="keyword">class </span>VideoStream;
<a name="l00145"></a>00145 <span class="keyword">class </span>VideoFrameRef;
<a name="l00146"></a>00146 <span class="keyword">class </span>Device;
<a name="l00147"></a>00147 <span class="keyword">class </span>OpenNI;
<a name="l00148"></a>00148 <span class="keyword">class </span>CameraSettings;
<a name="l00149"></a>00149 <span class="keyword">class </span>PlaybackControl;
<a name="l00150"></a>00150 
<a name="l00165"></a><a class="code" href="classopenni_1_1_video_mode.html">00165</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> : <span class="keyword">private</span> OniVideoMode
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167 <span class="keyword">public</span>:
<a name="l00173"></a><a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">00173</a>     <a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">VideoMode</a>()
<a name="l00174"></a>00174     {}
<a name="l00175"></a>00175 
<a name="l00181"></a><a class="code" href="classopenni_1_1_video_mode.html#a6af750616c636565dcdf93fd137044e7">00181</a>     <a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">VideoMode</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; other)
<a name="l00182"></a>00182     {
<a name="l00183"></a>00183         *<span class="keyword">this</span> = other;
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 
<a name="l00192"></a><a class="code" href="classopenni_1_1_video_mode.html#a7dc4cd97e74a1c99408bc2a39964c16d">00192</a>     <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; <a class="code" href="classopenni_1_1_video_mode.html#a7dc4cd97e74a1c99408bc2a39964c16d">operator=</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; other)
<a name="l00193"></a>00193     {
<a name="l00194"></a>00194         <a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">setPixelFormat</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">getPixelFormat</a>());
<a name="l00195"></a>00195         <a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">setResolution</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">getResolutionX</a>(), other.<a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">getResolutionY</a>());
<a name="l00196"></a>00196         <a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">setFps</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">getFps</a>());
<a name="l00197"></a>00197 
<a name="l00198"></a>00198         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00205"></a><a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">00205</a>     <a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a> <a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">getPixelFormat</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a>)pixelFormat; }
<a name="l00206"></a>00206 
<a name="l00211"></a><a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">00211</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">getResolutionX</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> resolutionX; }
<a name="l00212"></a>00212 
<a name="l00217"></a><a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">00217</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">getResolutionY</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> resolutionY;}
<a name="l00218"></a>00218 
<a name="l00223"></a><a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">00223</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">getFps</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fps; }
<a name="l00224"></a>00224 
<a name="l00231"></a><a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">00231</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">setPixelFormat</a>(<a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a> format) { this-&gt;pixelFormat = (OniPixelFormat)format; }
<a name="l00232"></a>00232 
<a name="l00240"></a><a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">00240</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">setResolution</a>(<span class="keywordtype">int</span> resolutionX, <span class="keywordtype">int</span> resolutionY)
<a name="l00241"></a>00241     {
<a name="l00242"></a>00242         this-&gt;resolutionX = resolutionX;
<a name="l00243"></a>00243         this-&gt;resolutionY = resolutionY;
<a name="l00244"></a>00244     }
<a name="l00245"></a>00245 
<a name="l00252"></a><a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">00252</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">setFps</a>(<span class="keywordtype">int</span> fps) { this-&gt;fps = fps; }
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="classopenni_1_1_video_mode.html#a08ab6b96be9413b35b5898694db91bfb">00254</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>;
<a name="l00255"></a><a class="code" href="classopenni_1_1_video_mode.html#a4fd1028f691947151ea08e0db214f01c">00255</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00256"></a><a class="code" href="classopenni_1_1_video_mode.html#a19caa736db2e87abcc9d7c66bccaefb6">00256</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>;
<a name="l00257"></a>00257 };
<a name="l00258"></a>00258 
<a name="l00276"></a><a class="code" href="classopenni_1_1_sensor_info.html">00276</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>
<a name="l00277"></a>00277 {
<a name="l00278"></a>00278 <span class="keyword">public</span>:
<a name="l00283"></a><a class="code" href="classopenni_1_1_sensor_info.html#a13ba6152bbfbadf9c39eacdbab9ce82c">00283</a>     <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> <a class="code" href="classopenni_1_1_sensor_info.html#a13ba6152bbfbadf9c39eacdbab9ce82c">getSensorType</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a>)m_pInfo-&gt;sensorType; }
<a name="l00284"></a>00284 
<a name="l00292"></a><a class="code" href="classopenni_1_1_sensor_info.html#a4dd9f8796091f2ad3853efe13929f719">00292</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_array.html">Array&lt;VideoMode&gt;</a>&amp; <a class="code" href="classopenni_1_1_sensor_info.html#a4dd9f8796091f2ad3853efe13929f719">getSupportedVideoModes</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_videoModes; }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="keyword">private</span>:
<a name="l00295"></a>00295     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp;);
<a name="l00296"></a>00296     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp;);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>() : m_pInfo(NULL), m_videoModes(NULL, 0) {}
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     SensorInfo(<span class="keyword">const</span> OniSensorInfo* pInfo) : m_pInfo(NULL), m_videoModes(NULL, 0)
<a name="l00301"></a>00301     {
<a name="l00302"></a>00302         _setInternal(pInfo);
<a name="l00303"></a>00303     }
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <span class="keywordtype">void</span> _setInternal(<span class="keyword">const</span> OniSensorInfo* pInfo)
<a name="l00306"></a>00306     {
<a name="l00307"></a>00307         m_pInfo = pInfo;
<a name="l00308"></a>00308         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l00309"></a>00309         {
<a name="l00310"></a>00310             m_videoModes._setData(NULL, 0);
<a name="l00311"></a>00311         }
<a name="l00312"></a>00312         <span class="keywordflow">else</span>
<a name="l00313"></a>00313         {
<a name="l00314"></a>00314             m_videoModes._setData(static_cast&lt;VideoMode*&gt;(pInfo-&gt;pSupportedVideoModes), pInfo-&gt;numSupportedVideoModes);
<a name="l00315"></a>00315         }
<a name="l00316"></a>00316     }
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     <span class="keyword">const</span> OniSensorInfo* m_pInfo;
<a name="l00319"></a>00319     Array&lt;VideoMode&gt; m_videoModes;
<a name="l00320"></a>00320 
<a name="l00321"></a><a class="code" href="classopenni_1_1_sensor_info.html#a4fd1028f691947151ea08e0db214f01c">00321</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00322"></a><a class="code" href="classopenni_1_1_sensor_info.html#a520fa05e0bf58785da428f7a0241eee2">00322</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l00323"></a>00323 };
<a name="l00324"></a>00324 
<a name="l00334"></a><a class="code" href="classopenni_1_1_device_info.html">00334</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a> : <span class="keyword">private</span> OniDeviceInfo
<a name="l00335"></a>00335 {
<a name="l00336"></a>00336 <span class="keyword">public</span>:
<a name="l00341"></a><a class="code" href="classopenni_1_1_device_info.html#af4f01d41cff1abc9c8ac0b32425fee25">00341</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#af4f01d41cff1abc9c8ac0b32425fee25">getUri</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> uri; }
<a name="l00343"></a><a class="code" href="classopenni_1_1_device_info.html#ac0299511484c97c396e29da8e807b139">00343</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#ac0299511484c97c396e29da8e807b139">getVendor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> vendor; }
<a name="l00345"></a><a class="code" href="classopenni_1_1_device_info.html#a9e6778ffdd87c71cd87fc0c811c305bf">00345</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#a9e6778ffdd87c71cd87fc0c811c305bf">getName</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> name; }
<a name="l00347"></a><a class="code" href="classopenni_1_1_device_info.html#aab7d4575adff3fd5e835446a78c76e37">00347</a>     uint16_t <a class="code" href="classopenni_1_1_device_info.html#aab7d4575adff3fd5e835446a78c76e37">getUsbVendorId</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> usbVendorId; }
<a name="l00349"></a><a class="code" href="classopenni_1_1_device_info.html#a79580fdda1ed6e0592de2a8a49a7d947">00349</a>     uint16_t <a class="code" href="classopenni_1_1_device_info.html#a79580fdda1ed6e0592de2a8a49a7d947">getUsbProductId</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> usbProductId; }
<a name="l00350"></a>00350 
<a name="l00351"></a><a class="code" href="classopenni_1_1_device_info.html#a520fa05e0bf58785da428f7a0241eee2">00351</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l00352"></a><a class="code" href="classopenni_1_1_device_info.html#a1d661a036b1e7e29b65f2b012bc92d00">00352</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l00353"></a>00353 };
<a name="l00354"></a>00354 
<a name="l00368"></a><a class="code" href="classopenni_1_1_video_frame_ref.html">00368</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370 <span class="keyword">public</span>:
<a name="l00375"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">00375</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">VideoFrameRef</a>()
<a name="l00376"></a>00376     {
<a name="l00377"></a>00377         m_pFrame = NULL;
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379 
<a name="l00383"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1003fbe08a41586b8bf98c8e3f76fd0d">00383</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#a1003fbe08a41586b8bf98c8e3f76fd0d">~VideoFrameRef</a>()
<a name="l00384"></a>00384     {
<a name="l00385"></a>00385         <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>();
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387 
<a name="l00393"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ae7f1a028c98bf9969a5e5b504e37c378">00393</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">VideoFrameRef</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; other) : m_pFrame(NULL)
<a name="l00394"></a>00394     {
<a name="l00395"></a>00395         _setFrame(other.m_pFrame);
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397 
<a name="l00403"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#aa60bde0bb1fa8db6992585ca80f57932">00403</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; <a class="code" href="classopenni_1_1_video_frame_ref.html#aa60bde0bb1fa8db6992585ca80f57932">operator=</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; other)
<a name="l00404"></a>00404     {
<a name="l00405"></a>00405         _setFrame(other.m_pFrame);
<a name="l00406"></a>00406         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408 
<a name="l00414"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1414fae176ed7bb88f3b02865014ee09">00414</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a1414fae176ed7bb88f3b02865014ee09">getDataSize</a>()<span class="keyword"> const</span>
<a name="l00415"></a>00415 <span class="keyword">    </span>{
<a name="l00416"></a>00416         <span class="keywordflow">return</span> m_pFrame-&gt;dataSize;
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418 
<a name="l00424"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad9301e9b6d52ffa9424cfeb881a36115">00424</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="classopenni_1_1_video_frame_ref.html#ad9301e9b6d52ffa9424cfeb881a36115">getData</a>()<span class="keyword"> const</span>
<a name="l00425"></a>00425 <span class="keyword">    </span>{
<a name="l00426"></a>00426         <span class="keywordflow">return</span> m_pFrame-&gt;data;
<a name="l00427"></a>00427     }
<a name="l00428"></a>00428 
<a name="l00435"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a25492deb69c269488b3ec56ac50b46af">00435</a>     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> <a class="code" href="classopenni_1_1_video_frame_ref.html#a25492deb69c269488b3ec56ac50b46af">getSensorType</a>()<span class="keyword"> const</span>
<a name="l00436"></a>00436 <span class="keyword">    </span>{
<a name="l00437"></a>00437         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a>)m_pFrame-&gt;sensorType;
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439 
<a name="l00447"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1dc7e93d0ae87f0eed6b7425b7d5e226">00447</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; <a class="code" href="classopenni_1_1_video_frame_ref.html#a1dc7e93d0ae87f0eed6b7425b7d5e226">getVideoMode</a>()<span class="keyword"> const</span>
<a name="l00448"></a>00448 <span class="keyword">    </span>{
<a name="l00449"></a>00449         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp;<span class="keyword">&gt;</span>(m_pFrame-&gt;videoMode);
<a name="l00450"></a>00450     }
<a name="l00451"></a>00451 
<a name="l00459"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ab35db18e8668a71ac1105044d8881c8f">00459</a>     <span class="keyword">inline</span> uint64_t <a class="code" href="classopenni_1_1_video_frame_ref.html#ab35db18e8668a71ac1105044d8881c8f">getTimestamp</a>()<span class="keyword"> const</span>
<a name="l00460"></a>00460 <span class="keyword">    </span>{
<a name="l00461"></a>00461         <span class="keywordflow">return</span> m_pFrame-&gt;timestamp;
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463 
<a name="l00474"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ac5ae171717c0f0bb6850c4c2e745045c">00474</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ac5ae171717c0f0bb6850c4c2e745045c">getFrameIndex</a>()<span class="keyword"> const</span>
<a name="l00475"></a>00475 <span class="keyword">    </span>{
<a name="l00476"></a>00476         <span class="keywordflow">return</span> m_pFrame-&gt;frameIndex;
<a name="l00477"></a>00477     }
<a name="l00478"></a>00478 
<a name="l00485"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a6cfc6f11fe07f3d1a5d283b361f592da">00485</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a6cfc6f11fe07f3d1a5d283b361f592da">getWidth</a>()<span class="keyword"> const</span>
<a name="l00486"></a>00486 <span class="keyword">    </span>{
<a name="l00487"></a>00487         <span class="keywordflow">return</span> m_pFrame-&gt;width;
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489 
<a name="l00495"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a683e3f4b8e327021661ad4e2715de2bc">00495</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a683e3f4b8e327021661ad4e2715de2bc">getHeight</a>()<span class="keyword"> const</span>
<a name="l00496"></a>00496 <span class="keyword">    </span>{
<a name="l00497"></a>00497         <span class="keywordflow">return</span> m_pFrame-&gt;height;
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499 
<a name="l00504"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad1f58ce43de4ce5d107aa013006d9666">00504</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ad1f58ce43de4ce5d107aa013006d9666">getCroppingEnabled</a>()<span class="keyword"> const</span>
<a name="l00505"></a>00505 <span class="keyword">    </span>{
<a name="l00506"></a>00506         <span class="keywordflow">return</span> m_pFrame-&gt;croppingEnabled == TRUE;
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508 
<a name="l00513"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad7e1230755e708988280d5920f92cd6b">00513</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ad7e1230755e708988280d5920f92cd6b">getCropOriginX</a>()<span class="keyword"> const</span>
<a name="l00514"></a>00514 <span class="keyword">    </span>{
<a name="l00515"></a>00515         <span class="keywordflow">return</span> m_pFrame-&gt;cropOriginX;
<a name="l00516"></a>00516     }
<a name="l00517"></a>00517 
<a name="l00522"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a137500fe04989b64522d81aac9f95217">00522</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a137500fe04989b64522d81aac9f95217">getCropOriginY</a>()<span class="keyword"> const</span>
<a name="l00523"></a>00523 <span class="keyword">    </span>{
<a name="l00524"></a>00524         <span class="keywordflow">return</span> m_pFrame-&gt;cropOriginY;
<a name="l00525"></a>00525     }
<a name="l00526"></a>00526 
<a name="l00532"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a73df1d5be3af74f80297aeef5c6b1655">00532</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a73df1d5be3af74f80297aeef5c6b1655">getStrideInBytes</a>()<span class="keyword"> const</span>
<a name="l00533"></a>00533 <span class="keyword">    </span>{
<a name="l00534"></a>00534         <span class="keywordflow">return</span> m_pFrame-&gt;stride;
<a name="l00535"></a>00535     }
<a name="l00536"></a>00536 
<a name="l00540"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a6b426ef8a97df059c1a35906c7f154d5">00540</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a6b426ef8a97df059c1a35906c7f154d5">isValid</a>()<span class="keyword"> const</span>
<a name="l00541"></a>00541 <span class="keyword">    </span>{
<a name="l00542"></a>00542         <span class="keywordflow">return</span> m_pFrame != NULL;
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544 
<a name="l00549"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">00549</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>()
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551         <span class="keywordflow">if</span> (m_pFrame != NULL)
<a name="l00552"></a>00552         {
<a name="l00553"></a>00553             oniFrameRelease(m_pFrame);
<a name="l00554"></a>00554             m_pFrame = NULL;
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557 
<a name="l00559"></a>00559     <span class="keywordtype">void</span> _setFrame(OniFrame* pFrame)
<a name="l00560"></a>00560     {
<a name="l00561"></a>00561         setReference(pFrame);
<a name="l00562"></a>00562         <span class="keywordflow">if</span> (pFrame != NULL)
<a name="l00563"></a>00563         {
<a name="l00564"></a>00564             oniFrameAddRef(pFrame);
<a name="l00565"></a>00565         }
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567 
<a name="l00569"></a>00569     OniFrame* _getFrame()
<a name="l00570"></a>00570     {
<a name="l00571"></a>00571         <span class="keywordflow">return</span> m_pFrame;
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 <span class="keyword">private</span>:
<a name="l00575"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a4fd1028f691947151ea08e0db214f01c">00575</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00576"></a>00576     <span class="keyword">inline</span> <span class="keywordtype">void</span> setReference(OniFrame* pFrame)
<a name="l00577"></a>00577     {
<a name="l00578"></a>00578         <span class="comment">// Initial - don&#39;t addref. This is the reference from OpenNI</span>
<a name="l00579"></a>00579         <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>();
<a name="l00580"></a>00580         m_pFrame = pFrame;
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     OniFrame* m_pFrame; <span class="comment">// const!!?</span>
<a name="l00584"></a>00584 };
<a name="l00585"></a>00585 
<a name="l00607"></a><a class="code" href="classopenni_1_1_video_stream.html">00607</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>
<a name="l00608"></a>00608 {
<a name="l00609"></a>00609 <span class="keyword">public</span>:
<a name="l00617"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">00617</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>
<a name="l00618"></a>00618     {
<a name="l00619"></a>00619     <span class="keyword">public</span>:
<a name="l00623"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a73fb0101631bc1da7eeae056d73d78fc">00623</a>         <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a73fb0101631bc1da7eeae056d73d78fc">NewFrameListener</a>() : m_callbackHandle(NULL)
<a name="l00624"></a>00624         {
<a name="l00625"></a>00625         }
<a name="l00626"></a>00626 
<a name="l00630"></a>00630         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a5f6a771b3f48e2217d036bd1c6b520a4">onNewFrame</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp;) = 0;
<a name="l00631"></a>00631 
<a name="l00632"></a>00632     <span class="keyword">private</span>:
<a name="l00633"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a4fd1028f691947151ea08e0db214f01c">00633</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00634"></a>00634 
<a name="l00635"></a>00635         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE callback(OniStreamHandle streamHandle, <span class="keywordtype">void</span>* pCookie)
<a name="l00636"></a>00636         {
<a name="l00637"></a>00637             <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener = (<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>*)pCookie;
<a name="l00638"></a>00638             <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a> stream;
<a name="l00639"></a>00639             stream._setHandle(streamHandle);
<a name="l00640"></a>00640             pListener-&gt;<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a5f6a771b3f48e2217d036bd1c6b520a4">onNewFrame</a>(stream);
<a name="l00641"></a>00641             stream._setHandle(NULL);
<a name="l00642"></a>00642         }
<a name="l00643"></a>00643         OniCallbackHandle m_callbackHandle;
<a name="l00644"></a>00644     };
<a name="l00645"></a>00645 
<a name="l00650"></a><a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">00650</a>     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>() : m_stream(NULL), m_sensorInfo(), m_pCameraSettings(NULL)
<a name="l00651"></a>00651     {}
<a name="l00652"></a>00652 
<a name="l00657"></a><a class="code" href="classopenni_1_1_video_stream.html#a063149ee3a46d499af3819565156c818">00657</a>     <a class="code" href="classopenni_1_1_video_stream.html#a063149ee3a46d499af3819565156c818">~VideoStream</a>()
<a name="l00658"></a>00658     {
<a name="l00659"></a>00659         <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">destroy</a>();
<a name="l00660"></a>00660     }
<a name="l00661"></a>00661 
<a name="l00666"></a><a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">00666</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>()<span class="keyword"> const</span>
<a name="l00667"></a>00667 <span class="keyword">    </span>{
<a name="l00668"></a>00668         <span class="keywordflow">return</span> m_stream != NULL;
<a name="l00669"></a>00669     }
<a name="l00670"></a>00670 
<a name="l00680"></a>00680     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">create</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; device, <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType);
<a name="l00681"></a>00681 
<a name="l00687"></a>00687     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">destroy</a>();
<a name="l00688"></a>00688 
<a name="l00697"></a><a class="code" href="classopenni_1_1_video_stream.html#aede2670a0035d933929d7c7a9356edc5">00697</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp; <a class="code" href="classopenni_1_1_video_stream.html#aede2670a0035d933929d7c7a9356edc5">getSensorInfo</a>()<span class="keyword"> const</span>
<a name="l00698"></a>00698 <span class="keyword">    </span>{
<a name="l00699"></a>00699         <span class="keywordflow">return</span> m_sensorInfo;
<a name="l00700"></a>00700     }
<a name="l00701"></a>00701 
<a name="l00705"></a><a class="code" href="classopenni_1_1_video_stream.html#a090d4873ab30dac86d29005831ffbd77">00705</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a090d4873ab30dac86d29005831ffbd77">start</a>()
<a name="l00706"></a>00706     {
<a name="l00707"></a>00707         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00708"></a>00708         {
<a name="l00709"></a>00709             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00710"></a>00710         }
<a name="l00711"></a>00711 
<a name="l00712"></a>00712         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamStart(m_stream);
<a name="l00713"></a>00713     }
<a name="l00714"></a>00714 
<a name="l00718"></a><a class="code" href="classopenni_1_1_video_stream.html#a55fc279dd603a694ee5f5ec074592dce">00718</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#a55fc279dd603a694ee5f5ec074592dce">stop</a>()
<a name="l00719"></a>00719     {
<a name="l00720"></a>00720         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00721"></a>00721         {
<a name="l00722"></a>00722             <span class="keywordflow">return</span>;
<a name="l00723"></a>00723         }
<a name="l00724"></a>00724 
<a name="l00725"></a>00725         oniStreamStop(m_stream);
<a name="l00726"></a>00726     }
<a name="l00727"></a>00727 
<a name="l00738"></a><a class="code" href="classopenni_1_1_video_stream.html#a1610b8aaa89e0f39a607b9780ba9ab77">00738</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a1610b8aaa89e0f39a607b9780ba9ab77">readFrame</a>(<a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>* pFrame)
<a name="l00739"></a>00739     {
<a name="l00740"></a>00740         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00741"></a>00741         {
<a name="l00742"></a>00742             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00743"></a>00743         }
<a name="l00744"></a>00744 
<a name="l00745"></a>00745         OniFrame* pOniFrame;
<a name="l00746"></a>00746         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamReadFrame(m_stream, &amp;pOniFrame);
<a name="l00747"></a>00747 
<a name="l00748"></a>00748         pFrame-&gt;setReference(pOniFrame);
<a name="l00749"></a>00749         <span class="keywordflow">return</span> rc;
<a name="l00750"></a>00750     }
<a name="l00751"></a>00751 
<a name="l00759"></a><a class="code" href="classopenni_1_1_video_stream.html#a72da62972b0f042d2e4d6b4e1bf3605a">00759</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72da62972b0f042d2e4d6b4e1bf3605a">addNewFrameListener</a>(<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener)
<a name="l00760"></a>00760     {
<a name="l00761"></a>00761         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00762"></a>00762         {
<a name="l00763"></a>00763             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00764"></a>00764         }
<a name="l00765"></a>00765 
<a name="l00766"></a>00766         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamRegisterNewFrameCallback(m_stream, pListener-&gt;callback, pListener, &amp;pListener-&gt;m_callbackHandle);
<a name="l00767"></a>00767     }
<a name="l00768"></a>00768 
<a name="l00773"></a><a class="code" href="classopenni_1_1_video_stream.html#a4842ff4f5b1be4c668f0c616b98aaa92">00773</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#a4842ff4f5b1be4c668f0c616b98aaa92">removeNewFrameListener</a>(<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener)
<a name="l00774"></a>00774     {
<a name="l00775"></a>00775         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00776"></a>00776         {
<a name="l00777"></a>00777             <span class="keywordflow">return</span>;
<a name="l00778"></a>00778         }
<a name="l00779"></a>00779 
<a name="l00780"></a>00780         oniStreamUnregisterNewFrameCallback(m_stream, pListener-&gt;m_callbackHandle);
<a name="l00781"></a>00781         pListener-&gt;m_callbackHandle = NULL;
<a name="l00782"></a>00782     }
<a name="l00783"></a>00783 
<a name="l00788"></a>00788     OniStreamHandle _getHandle()<span class="keyword"> const</span>
<a name="l00789"></a>00789 <span class="keyword">    </span>{
<a name="l00790"></a>00790         <span class="keywordflow">return</span> m_stream;
<a name="l00791"></a>00791     }
<a name="l00792"></a>00792 
<a name="l00797"></a><a class="code" href="classopenni_1_1_video_stream.html#a029f6df9d50d1f125c0ec2c7f2b6574f">00797</a>     <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>* <a class="code" href="classopenni_1_1_video_stream.html#a029f6df9d50d1f125c0ec2c7f2b6574f">getCameraSettings</a>() {<span class="keywordflow">return</span> m_pCameraSettings;}
<a name="l00798"></a>00798 
<a name="l00809"></a><a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">00809</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span>* dataSize)<span class="keyword"> const</span>
<a name="l00810"></a>00810 <span class="keyword">    </span>{
<a name="l00811"></a>00811         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00812"></a>00812         {
<a name="l00813"></a>00813             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00814"></a>00814         }
<a name="l00815"></a>00815 
<a name="l00816"></a>00816         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamGetProperty(m_stream, propertyId, data, dataSize);
<a name="l00817"></a>00817     }
<a name="l00818"></a>00818 
<a name="l00829"></a><a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">00829</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l00830"></a>00830     {
<a name="l00831"></a>00831         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00832"></a>00832         {
<a name="l00833"></a>00833             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00834"></a>00834         }
<a name="l00835"></a>00835 
<a name="l00836"></a>00836         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamSetProperty(m_stream, propertyId, data, dataSize);
<a name="l00837"></a>00837     }
<a name="l00838"></a>00838 
<a name="l00845"></a><a class="code" href="classopenni_1_1_video_stream.html#a8fb28ca1b61d1ecabd28d08633e927ab">00845</a>     <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> <a class="code" href="classopenni_1_1_video_stream.html#a8fb28ca1b61d1ecabd28d08633e927ab">getVideoMode</a>()<span class="keyword"> const</span>
<a name="l00846"></a>00846 <span class="keyword">    </span>{
<a name="l00847"></a>00847         <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> videoMode;
<a name="l00848"></a>00848         getProperty&lt;OniVideoMode&gt;(STREAM_PROPERTY_VIDEO_MODE, <span class="keyword">static_cast&lt;</span>OniVideoMode*<span class="keyword">&gt;</span>(&amp;videoMode));
<a name="l00849"></a>00849         <span class="keywordflow">return</span> videoMode;
<a name="l00850"></a>00850     }
<a name="l00851"></a>00851 
<a name="l00860"></a><a class="code" href="classopenni_1_1_video_stream.html#a542e98aecfcdfc5c38079d80960af5d2">00860</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a542e98aecfcdfc5c38079d80960af5d2">setVideoMode</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; videoMode)
<a name="l00861"></a>00861     {
<a name="l00862"></a>00862         <span class="keywordflow">return</span> setProperty&lt;OniVideoMode&gt;(STREAM_PROPERTY_VIDEO_MODE, <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>OniVideoMode&amp;<span class="keyword">&gt;</span>(videoMode));
<a name="l00863"></a>00863     }
<a name="l00864"></a>00864 
<a name="l00870"></a><a class="code" href="classopenni_1_1_video_stream.html#a28120b50c843e3062a756c92ed485281">00870</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_stream.html#a28120b50c843e3062a756c92ed485281">getMaxPixelValue</a>()<span class="keyword"> const</span>
<a name="l00871"></a>00871 <span class="keyword">    </span>{
<a name="l00872"></a>00872         <span class="keywordtype">int</span> maxValue;
<a name="l00873"></a>00873         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;int&gt;(STREAM_PROPERTY_MAX_VALUE, &amp;maxValue);
<a name="l00874"></a>00874         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00875"></a>00875         {
<a name="l00876"></a>00876             <span class="keywordflow">return</span> 0;
<a name="l00877"></a>00877         }
<a name="l00878"></a>00878         <span class="keywordflow">return</span> maxValue;
<a name="l00879"></a>00879     }
<a name="l00880"></a>00880 
<a name="l00886"></a><a class="code" href="classopenni_1_1_video_stream.html#a00fb26ce13b2509eb8f9a6d0290697b9">00886</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_stream.html#a00fb26ce13b2509eb8f9a6d0290697b9">getMinPixelValue</a>()<span class="keyword"> const</span>
<a name="l00887"></a>00887 <span class="keyword">    </span>{
<a name="l00888"></a>00888         <span class="keywordtype">int</span> minValue;
<a name="l00889"></a>00889         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;int&gt;(STREAM_PROPERTY_MIN_VALUE, &amp;minValue);
<a name="l00890"></a>00890         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00891"></a>00891         {
<a name="l00892"></a>00892             <span class="keywordflow">return</span> 0;
<a name="l00893"></a>00893         }
<a name="l00894"></a>00894         <span class="keywordflow">return</span> minValue;
<a name="l00895"></a>00895     }
<a name="l00896"></a>00896 
<a name="l00901"></a><a class="code" href="classopenni_1_1_video_stream.html#a05345182b0d9d8b967a9575980a5523e">00901</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#a05345182b0d9d8b967a9575980a5523e">isCroppingSupported</a>()<span class="keyword"> const</span>
<a name="l00902"></a>00902 <span class="keyword">    </span>{
<a name="l00903"></a>00903         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_CROPPING);
<a name="l00904"></a>00904     }
<a name="l00905"></a>00905 
<a name="l00914"></a><a class="code" href="classopenni_1_1_video_stream.html#aa3f5d33e2d3bdf0416a427617b8cb180">00914</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#aa3f5d33e2d3bdf0416a427617b8cb180">getCropping</a>(<span class="keywordtype">int</span>* pOriginX, <span class="keywordtype">int</span>* pOriginY, <span class="keywordtype">int</span>* pWidth, <span class="keywordtype">int</span>* pHeight)<span class="keyword"> const</span>
<a name="l00915"></a>00915 <span class="keyword">    </span>{
<a name="l00916"></a>00916         OniCropping cropping;
<a name="l00917"></a>00917         <span class="keywordtype">bool</span> enabled = <span class="keyword">false</span>;
<a name="l00918"></a>00918 
<a name="l00919"></a>00919         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, &amp;cropping);
<a name="l00920"></a>00920 
<a name="l00921"></a>00921         <span class="keywordflow">if</span> (rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00922"></a>00922         {
<a name="l00923"></a>00923             *pOriginX = cropping.originX;
<a name="l00924"></a>00924             *pOriginY = cropping.originY;
<a name="l00925"></a>00925             *pWidth = cropping.width;
<a name="l00926"></a>00926             *pHeight = cropping.height;
<a name="l00927"></a>00927             enabled = (cropping.enabled == TRUE);
<a name="l00928"></a>00928         }
<a name="l00929"></a>00929 
<a name="l00930"></a>00930         <span class="keywordflow">return</span> enabled;
<a name="l00931"></a>00931     }
<a name="l00932"></a>00932 
<a name="l00942"></a><a class="code" href="classopenni_1_1_video_stream.html#a5b3bc3ef4e531496f875fdbf6604a157">00942</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a5b3bc3ef4e531496f875fdbf6604a157">setCropping</a>(<span class="keywordtype">int</span> originX, <span class="keywordtype">int</span> originY, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l00943"></a>00943     {
<a name="l00944"></a>00944         OniCropping cropping;
<a name="l00945"></a>00945         cropping.enabled = <span class="keyword">true</span>;
<a name="l00946"></a>00946         cropping.originX = originX;
<a name="l00947"></a>00947         cropping.originY = originY;
<a name="l00948"></a>00948         cropping.width = width;
<a name="l00949"></a>00949         cropping.height = height;
<a name="l00950"></a>00950         <span class="keywordflow">return</span> setProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, cropping);
<a name="l00951"></a>00951     }
<a name="l00952"></a>00952 
<a name="l00957"></a><a class="code" href="classopenni_1_1_video_stream.html#ae3f8fc2698c14d85667d35d358d4643c">00957</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#ae3f8fc2698c14d85667d35d358d4643c">resetCropping</a>()
<a name="l00958"></a>00958     {
<a name="l00959"></a>00959         OniCropping cropping;
<a name="l00960"></a>00960         cropping.enabled = <span class="keyword">false</span>;
<a name="l00961"></a>00961         <span class="keywordflow">return</span> setProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, cropping);
<a name="l00962"></a>00962     }
<a name="l00963"></a>00963 
<a name="l00968"></a><a class="code" href="classopenni_1_1_video_stream.html#aad5a1e2f4eeba20896d2b9ef04a52e7a">00968</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#aad5a1e2f4eeba20896d2b9ef04a52e7a">getMirroringEnabled</a>()<span class="keyword"> const</span>
<a name="l00969"></a>00969 <span class="keyword">    </span>{
<a name="l00970"></a>00970         OniBool enabled;
<a name="l00971"></a>00971         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;OniBool&gt;(STREAM_PROPERTY_MIRRORING, &amp;enabled);
<a name="l00972"></a>00972         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00973"></a>00973         {
<a name="l00974"></a>00974             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00975"></a>00975         }
<a name="l00976"></a>00976         <span class="keywordflow">return</span> enabled == TRUE;
<a name="l00977"></a>00977     }
<a name="l00978"></a>00978 
<a name="l00984"></a><a class="code" href="classopenni_1_1_video_stream.html#af34b31b62f0ae9d1772b6ff85ef0bae5">00984</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#af34b31b62f0ae9d1772b6ff85ef0bae5">setMirroringEnabled</a>(<span class="keywordtype">bool</span> isEnabled)
<a name="l00985"></a>00985     {
<a name="l00986"></a>00986         <span class="keywordflow">return</span> setProperty&lt;OniBool&gt;(STREAM_PROPERTY_MIRRORING, isEnabled ? TRUE : FALSE);
<a name="l00987"></a>00987     }
<a name="l00988"></a>00988 
<a name="l00993"></a><a class="code" href="classopenni_1_1_video_stream.html#a9f8887507198057129befc8f448c7cb0">00993</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_video_stream.html#a9f8887507198057129befc8f448c7cb0">getHorizontalFieldOfView</a>()<span class="keyword"> const</span>
<a name="l00994"></a>00994 <span class="keyword">    </span>{
<a name="l00995"></a>00995         <span class="keywordtype">float</span> horizontal = 0;
<a name="l00996"></a>00996         getProperty&lt;float&gt;(STREAM_PROPERTY_HORIZONTAL_FOV, &amp;horizontal);
<a name="l00997"></a>00997         <span class="keywordflow">return</span> horizontal;
<a name="l00998"></a>00998     }
<a name="l00999"></a>00999 
<a name="l01004"></a><a class="code" href="classopenni_1_1_video_stream.html#a804549dfa750664943368ee6b304da31">01004</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_video_stream.html#a804549dfa750664943368ee6b304da31">getVerticalFieldOfView</a>()<span class="keyword"> const</span>
<a name="l01005"></a>01005 <span class="keyword">    </span>{
<a name="l01006"></a>01006         <span class="keywordtype">float</span> vertical = 0;
<a name="l01007"></a>01007         getProperty&lt;float&gt;(STREAM_PROPERTY_VERTICAL_FOV, &amp;vertical);
<a name="l01008"></a>01008         <span class="keywordflow">return</span> vertical;
<a name="l01009"></a>01009     }
<a name="l01010"></a>01010 
<a name="l01020"></a>01020     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01021"></a><a class="code" href="classopenni_1_1_video_stream.html#a915f6710f0818b24996daab96c5124ce">01021</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01022"></a>01022     {
<a name="l01023"></a>01023         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01024"></a>01024     }
<a name="l01025"></a>01025 
<a name="l01035"></a>01035     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01036"></a><a class="code" href="classopenni_1_1_video_stream.html#aa0916a3aa5ae7afa1a360c2ce4d642e8">01036</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01037"></a>01037 <span class="keyword">    </span>{
<a name="l01038"></a>01038         <span class="keywordtype">int</span> size = <span class="keyword">sizeof</span>(T);
<a name="l01039"></a>01039         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(propertyId, value, &amp;size);
<a name="l01040"></a>01040     }
<a name="l01041"></a>01041 
<a name="l01047"></a><a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">01047</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(<span class="keywordtype">int</span> propertyId)<span class="keyword"> const</span>
<a name="l01048"></a>01048 <span class="keyword">    </span>{
<a name="l01049"></a>01049         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01050"></a>01050         {
<a name="l01051"></a>01051             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01052"></a>01052         }
<a name="l01053"></a>01053 
<a name="l01054"></a>01054         <span class="keywordflow">return</span> oniStreamIsPropertySupported(m_stream, propertyId) == TRUE;
<a name="l01055"></a>01055     }
<a name="l01056"></a>01056 
<a name="l01066"></a><a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">01066</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(<span class="keywordtype">int</span> commandId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01067"></a>01067     {
<a name="l01068"></a>01068         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01069"></a>01069         {
<a name="l01070"></a>01070             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l01071"></a>01071         }
<a name="l01072"></a>01072 
<a name="l01073"></a>01073         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamInvoke(m_stream, commandId, data, dataSize);
<a name="l01074"></a>01074     }
<a name="l01075"></a>01075 
<a name="l01085"></a>01085     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01086"></a><a class="code" href="classopenni_1_1_video_stream.html#a64b9a9f7b0ead44bb3944b03cb2e1140">01086</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(<span class="keywordtype">int</span> commandId, <span class="keyword">const</span> T&amp; value)
<a name="l01087"></a>01087     {
<a name="l01088"></a>01088         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(commandId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01089"></a>01089     }
<a name="l01090"></a>01090 
<a name="l01096"></a><a class="code" href="classopenni_1_1_video_stream.html#a565db7c7a9d7f13960219c5d491898b7">01096</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#a565db7c7a9d7f13960219c5d491898b7">isCommandSupported</a>(<span class="keywordtype">int</span> commandId)<span class="keyword"> const</span>
<a name="l01097"></a>01097 <span class="keyword">    </span>{
<a name="l01098"></a>01098         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01099"></a>01099         {
<a name="l01100"></a>01100             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01101"></a>01101         }
<a name="l01102"></a>01102 
<a name="l01103"></a>01103         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamIsCommandSupported(m_stream, commandId) == TRUE;
<a name="l01104"></a>01104     }
<a name="l01105"></a>01105 
<a name="l01106"></a>01106 <span class="keyword">private</span>:
<a name="l01107"></a><a class="code" href="classopenni_1_1_video_stream.html#a520fa05e0bf58785da428f7a0241eee2">01107</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l01108"></a>01108 
<a name="l01109"></a>01109     <span class="keywordtype">void</span> _setHandle(OniStreamHandle stream)
<a name="l01110"></a>01110     {
<a name="l01111"></a>01111         m_sensorInfo._setInternal(NULL);
<a name="l01112"></a>01112         m_stream = stream;
<a name="l01113"></a>01113 
<a name="l01114"></a>01114         <span class="keywordflow">if</span> (stream != NULL)
<a name="l01115"></a>01115         {
<a name="l01116"></a>01116             m_sensorInfo._setInternal(oniStreamGetSensorInfo(m_stream));
<a name="l01117"></a>01117         }
<a name="l01118"></a>01118     }
<a name="l01119"></a>01119 
<a name="l01120"></a>01120 <span class="keyword">private</span>:
<a name="l01121"></a>01121     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; other);
<a name="l01122"></a>01122     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; other);
<a name="l01123"></a>01123 
<a name="l01124"></a>01124     OniStreamHandle m_stream;
<a name="l01125"></a>01125     SensorInfo m_sensorInfo;
<a name="l01126"></a>01126     CameraSettings* m_pCameraSettings;
<a name="l01127"></a>01127 };
<a name="l01128"></a>01128 
<a name="l01145"></a><a class="code" href="classopenni_1_1_device.html">01145</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>
<a name="l01146"></a>01146 {
<a name="l01147"></a>01147 <span class="keyword">public</span>:
<a name="l01152"></a><a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">01152</a>     <a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">Device</a>() : m_pPlaybackControl(NULL), m_device(NULL)
<a name="l01153"></a>01153     {
<a name="l01154"></a>01154         clearSensors();
<a name="l01155"></a>01155     }
<a name="l01156"></a>01156 
<a name="l01161"></a><a class="code" href="classopenni_1_1_device.html#a5faa442b23dfef84aa77d9117980a3ab">01161</a>     <a class="code" href="classopenni_1_1_device.html#a5faa442b23dfef84aa77d9117980a3ab">~Device</a>()
<a name="l01162"></a>01162     {
<a name="l01163"></a>01163         <span class="keywordflow">if</span> (m_device != NULL)
<a name="l01164"></a>01164         {
<a name="l01165"></a>01165             <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">close</a>();
<a name="l01166"></a>01166         }
<a name="l01167"></a>01167     }
<a name="l01168"></a>01168 
<a name="l01198"></a>01198     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* uri);
<a name="l01199"></a>01199 
<a name="l01205"></a>01205     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">close</a>();
<a name="l01206"></a>01206 
<a name="l01216"></a><a class="code" href="classopenni_1_1_device.html#a3e69ec283c5f886018d9bbbc09f29122">01216</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>&amp; <a class="code" href="classopenni_1_1_device.html#a3e69ec283c5f886018d9bbbc09f29122">getDeviceInfo</a>()<span class="keyword"> const</span>
<a name="l01217"></a>01217 <span class="keyword">    </span>{
<a name="l01218"></a>01218         <span class="keywordflow">return</span> m_deviceInfo;
<a name="l01219"></a>01219     }
<a name="l01220"></a>01220 
<a name="l01228"></a><a class="code" href="classopenni_1_1_device.html#aff0664ccc8e969e4778fec07b6adf81f">01228</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aff0664ccc8e969e4778fec07b6adf81f">hasSensor</a>(<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l01229"></a>01229     {
<a name="l01230"></a>01230         <span class="keywordtype">int</span> i;
<a name="l01231"></a>01231         <span class="keywordflow">for</span> (i = 0; (i &lt; ONI_MAX_SENSORS) &amp;&amp; (m_aSensorInfo[i].m_pInfo != NULL); ++i)
<a name="l01232"></a>01232         {
<a name="l01233"></a>01233             <span class="keywordflow">if</span> (m_aSensorInfo[i].getSensorType() == sensorType)
<a name="l01234"></a>01234             {
<a name="l01235"></a>01235                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01236"></a>01236             }
<a name="l01237"></a>01237         }
<a name="l01238"></a>01238 
<a name="l01239"></a>01239         <span class="keywordflow">if</span> (i == ONI_MAX_SENSORS)
<a name="l01240"></a>01240         {
<a name="l01241"></a>01241             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01242"></a>01242         }
<a name="l01243"></a>01243 
<a name="l01244"></a>01244         <span class="keyword">const</span> OniSensorInfo* pInfo = oniDeviceGetSensorInfo(m_device, (OniSensorType)sensorType);
<a name="l01245"></a>01245 
<a name="l01246"></a>01246         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l01247"></a>01247         {
<a name="l01248"></a>01248             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01249"></a>01249         }
<a name="l01250"></a>01250 
<a name="l01251"></a>01251         m_aSensorInfo[i]._setInternal(pInfo);
<a name="l01252"></a>01252 
<a name="l01253"></a>01253         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01254"></a>01254     }
<a name="l01255"></a>01255 
<a name="l01263"></a><a class="code" href="classopenni_1_1_device.html#ae2f512f237ee1d3d464250a8bdb81925">01263</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>* <a class="code" href="classopenni_1_1_device.html#ae2f512f237ee1d3d464250a8bdb81925">getSensorInfo</a>(<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l01264"></a>01264     {
<a name="l01265"></a>01265         <span class="keywordtype">int</span> i;
<a name="l01266"></a>01266         <span class="keywordflow">for</span> (i = 0; (i &lt; ONI_MAX_SENSORS) &amp;&amp; (m_aSensorInfo[i].m_pInfo != NULL); ++i)
<a name="l01267"></a>01267         {
<a name="l01268"></a>01268             <span class="keywordflow">if</span> (m_aSensorInfo[i].getSensorType() == sensorType)
<a name="l01269"></a>01269             {
<a name="l01270"></a>01270                 <span class="keywordflow">return</span> &amp;m_aSensorInfo[i];
<a name="l01271"></a>01271             }
<a name="l01272"></a>01272         }
<a name="l01273"></a>01273 
<a name="l01274"></a>01274         <span class="comment">// not found. check to see we have additional space</span>
<a name="l01275"></a>01275         <span class="keywordflow">if</span> (i == ONI_MAX_SENSORS)
<a name="l01276"></a>01276         {
<a name="l01277"></a>01277             <span class="keywordflow">return</span> NULL;
<a name="l01278"></a>01278         }
<a name="l01279"></a>01279 
<a name="l01280"></a>01280         <span class="keyword">const</span> OniSensorInfo* pInfo = oniDeviceGetSensorInfo(m_device, (OniSensorType)sensorType);
<a name="l01281"></a>01281         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l01282"></a>01282         {
<a name="l01283"></a>01283             <span class="keywordflow">return</span> NULL;
<a name="l01284"></a>01284         }
<a name="l01285"></a>01285 
<a name="l01286"></a>01286         m_aSensorInfo[i]._setInternal(pInfo);
<a name="l01287"></a>01287         <span class="keywordflow">return</span> &amp;m_aSensorInfo[i];
<a name="l01288"></a>01288     }
<a name="l01289"></a>01289 
<a name="l01294"></a>01294     OniDeviceHandle _getHandle()<span class="keyword"> const</span>
<a name="l01295"></a>01295 <span class="keyword">    </span>{
<a name="l01296"></a>01296         <span class="keywordflow">return</span> m_device;
<a name="l01297"></a>01297     }
<a name="l01298"></a>01298 
<a name="l01303"></a><a class="code" href="classopenni_1_1_device.html#ab1b0ec1efd1dc208d1f11a91257d3f91">01303</a>     <a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>* <a class="code" href="classopenni_1_1_device.html#ab1b0ec1efd1dc208d1f11a91257d3f91">getPlaybackControl</a>() {<span class="keywordflow">return</span> m_pPlaybackControl;}
<a name="l01304"></a>01304 
<a name="l01316"></a><a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">01316</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span>* dataSize)<span class="keyword"> const</span>
<a name="l01317"></a>01317 <span class="keyword">    </span>{
<a name="l01318"></a>01318         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceGetProperty(m_device, propertyId, data, dataSize);
<a name="l01319"></a>01319     }
<a name="l01320"></a>01320 
<a name="l01332"></a><a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">01332</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01333"></a>01333     {
<a name="l01334"></a>01334         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceSetProperty(m_device, propertyId, data, dataSize);
<a name="l01335"></a>01335     }
<a name="l01336"></a>01336 
<a name="l01344"></a><a class="code" href="classopenni_1_1_device.html#aaadcb55afcced08fcec9b3c88d98e39a">01344</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aaadcb55afcced08fcec9b3c88d98e39a">isImageRegistrationModeSupported</a>(<a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode)<span class="keyword"> const</span>
<a name="l01345"></a>01345 <span class="keyword">    </span>{
<a name="l01346"></a>01346         <span class="keywordflow">return</span> (oniDeviceIsImageRegistrationModeSupported(m_device, (OniImageRegistrationMode)mode) == TRUE);
<a name="l01347"></a>01347     }
<a name="l01348"></a>01348 
<a name="l01356"></a><a class="code" href="classopenni_1_1_device.html#a27b6ec5ffc1a851ee334d64eb94ca1a3">01356</a>     <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> <a class="code" href="classopenni_1_1_device.html#a27b6ec5ffc1a851ee334d64eb94ca1a3">getImageRegistrationMode</a>()<span class="keyword"> const</span>
<a name="l01357"></a>01357 <span class="keyword">    </span>{
<a name="l01358"></a>01358         <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode;
<a name="l01359"></a>01359         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;ImageRegistrationMode&gt;(DEVICE_PROPERTY_IMAGE_REGISTRATION, &amp;mode);
<a name="l01360"></a>01360         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01361"></a>01361         {
<a name="l01362"></a>01362             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9ca143ed30372dfe6638316fa04a3f1969d">IMAGE_REGISTRATION_OFF</a>;
<a name="l01363"></a>01363         }
<a name="l01364"></a>01364         <span class="keywordflow">return</span> mode;
<a name="l01365"></a>01365     }
<a name="l01366"></a>01366 
<a name="l01380"></a><a class="code" href="classopenni_1_1_device.html#a28161dabfe92ce624d7a805ff8f4ec6e">01380</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a28161dabfe92ce624d7a805ff8f4ec6e">setImageRegistrationMode</a>(<a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode)
<a name="l01381"></a>01381     {
<a name="l01382"></a>01382         <span class="keywordflow">return</span> setProperty&lt;ImageRegistrationMode&gt;(DEVICE_PROPERTY_IMAGE_REGISTRATION, mode);
<a name="l01383"></a>01383     }
<a name="l01384"></a>01384 
<a name="l01389"></a><a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">01389</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>()<span class="keyword"> const</span>
<a name="l01390"></a>01390 <span class="keyword">    </span>{
<a name="l01391"></a>01391         <span class="keywordflow">return</span> m_device != NULL;
<a name="l01392"></a>01392     }
<a name="l01393"></a>01393 
<a name="l01398"></a><a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">01398</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>()<span class="keyword"> const</span>
<a name="l01399"></a>01399 <span class="keyword">    </span>{
<a name="l01400"></a>01400         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(DEVICE_PROPERTY_PLAYBACK_SPEED) &amp;&amp;
<a name="l01401"></a>01401             <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED) &amp;&amp;
<a name="l01402"></a>01402             <a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">isCommandSupported</a>(DEVICE_COMMAND_SEEK);
<a name="l01403"></a>01403     }
<a name="l01404"></a>01404 
<a name="l01413"></a><a class="code" href="classopenni_1_1_device.html#a94dfc240ffd2f8e777494d10814d5d07">01413</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a94dfc240ffd2f8e777494d10814d5d07">setDepthColorSyncEnabled</a>(<span class="keywordtype">bool</span> isEnabled)
<a name="l01414"></a>01414     {
<a name="l01415"></a>01415         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l01416"></a>01416 
<a name="l01417"></a>01417         <span class="keywordflow">if</span> (isEnabled)
<a name="l01418"></a>01418         {
<a name="l01419"></a>01419             rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceEnableDepthColorSync(m_device);
<a name="l01420"></a>01420         }
<a name="l01421"></a>01421         <span class="keywordflow">else</span>
<a name="l01422"></a>01422         {
<a name="l01423"></a>01423             oniDeviceDisableDepthColorSync(m_device);
<a name="l01424"></a>01424         }
<a name="l01425"></a>01425 
<a name="l01426"></a>01426         <span class="keywordflow">return</span> rc;
<a name="l01427"></a>01427     }
<a name="l01428"></a>01428 
<a name="l01439"></a>01439     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01440"></a><a class="code" href="classopenni_1_1_device.html#a0879db9460aa56f1b85b4dcd569f797c">01440</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01441"></a>01441     {
<a name="l01442"></a>01442         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01443"></a>01443     }
<a name="l01444"></a>01444 
<a name="l01454"></a>01454     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01455"></a><a class="code" href="classopenni_1_1_device.html#ab3a1a6566e8c95eaf759114a946806f9">01455</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01456"></a>01456 <span class="keyword">    </span>{
<a name="l01457"></a>01457         <span class="keywordtype">int</span> size = <span class="keyword">sizeof</span>(T);
<a name="l01458"></a>01458         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(propertyId, value, &amp;size);
<a name="l01459"></a>01459     }
<a name="l01460"></a>01460 
<a name="l01466"></a><a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">01466</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(<span class="keywordtype">int</span> propertyId)<span class="keyword"> const</span>
<a name="l01467"></a>01467 <span class="keyword">    </span>{
<a name="l01468"></a>01468         <span class="keywordflow">return</span> oniDeviceIsPropertySupported(m_device, propertyId) == TRUE;
<a name="l01469"></a>01469     }
<a name="l01470"></a>01470 
<a name="l01480"></a><a class="code" href="classopenni_1_1_device.html#afd15b1d2c875bf224a8b1f45b889d680">01480</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#afd15b1d2c875bf224a8b1f45b889d680">invoke</a>(<span class="keywordtype">int</span> commandId, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01481"></a>01481     {
<a name="l01482"></a>01482         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceInvoke(m_device, commandId, data, dataSize);
<a name="l01483"></a>01483     }
<a name="l01484"></a>01484 
<a name="l01494"></a>01494     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01495"></a><a class="code" href="classopenni_1_1_device.html#a7f0fd6486ca5e02f34c86943ad89fb00">01495</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#afd15b1d2c875bf224a8b1f45b889d680">invoke</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01496"></a>01496     {
<a name="l01497"></a>01497         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#afd15b1d2c875bf224a8b1f45b889d680">invoke</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01498"></a>01498     }
<a name="l01499"></a>01499 
<a name="l01505"></a><a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">01505</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">isCommandSupported</a>(<span class="keywordtype">int</span> commandId)<span class="keyword"> const</span>
<a name="l01506"></a>01506 <span class="keyword">    </span>{
<a name="l01507"></a>01507         <span class="keywordflow">return</span> oniDeviceIsCommandSupported(m_device, commandId) == TRUE;
<a name="l01508"></a>01508     }
<a name="l01509"></a>01509 
<a name="l01510"></a>01510 <span class="keyword">private</span>:
<a name="l01511"></a>01511     <a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">Device</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp;);
<a name="l01512"></a>01512     <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp;);
<a name="l01513"></a>01513 
<a name="l01514"></a>01514     <span class="keywordtype">void</span> clearSensors()
<a name="l01515"></a>01515     {
<a name="l01516"></a>01516         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ONI_MAX_SENSORS; ++i)
<a name="l01517"></a>01517         {
<a name="l01518"></a>01518             m_aSensorInfo[i]._setInternal(NULL);
<a name="l01519"></a>01519         }
<a name="l01520"></a>01520     }
<a name="l01521"></a>01521 
<a name="l01522"></a>01522     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> _setHandle(OniDeviceHandle deviceHandle)
<a name="l01523"></a>01523     {
<a name="l01524"></a>01524         <span class="keywordflow">if</span> (m_device == NULL)
<a name="l01525"></a>01525         {
<a name="l01526"></a>01526             m_device = deviceHandle;
<a name="l01527"></a>01527 
<a name="l01528"></a>01528             clearSensors();
<a name="l01529"></a>01529 
<a name="l01530"></a>01530             oniDeviceGetInfo(m_device, &amp;m_deviceInfo);
<a name="l01531"></a>01531             <span class="comment">// Read deviceInfo</span>
<a name="l01532"></a>01532             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l01533"></a>01533         }
<a name="l01534"></a>01534 
<a name="l01535"></a>01535         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a0210e71f7ee8690aed5ae1ce961e690b">STATUS_OUT_OF_FLOW</a>;
<a name="l01536"></a>01536     }
<a name="l01537"></a>01537 
<a name="l01538"></a>01538 <span class="keyword">private</span>:
<a name="l01539"></a>01539     PlaybackControl* m_pPlaybackControl;
<a name="l01540"></a>01540 
<a name="l01541"></a>01541     OniDeviceHandle m_device;
<a name="l01542"></a>01542     DeviceInfo m_deviceInfo;
<a name="l01543"></a>01543     SensorInfo m_aSensorInfo[ONI_MAX_SENSORS];
<a name="l01544"></a>01544 };
<a name="l01545"></a>01545 
<a name="l01559"></a><a class="code" href="classopenni_1_1_playback_control.html">01559</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>
<a name="l01560"></a>01560 {
<a name="l01561"></a>01561 <span class="keyword">public</span>:
<a name="l01562"></a>01562 
<a name="l01568"></a><a class="code" href="classopenni_1_1_playback_control.html#a1ff78b61cdde4b4777b30325d0cda0d9">01568</a>     <a class="code" href="classopenni_1_1_playback_control.html#a1ff78b61cdde4b4777b30325d0cda0d9">~PlaybackControl</a>()
<a name="l01569"></a>01569     {
<a name="l01570"></a>01570         detach();
<a name="l01571"></a>01571     }
<a name="l01572"></a>01572 
<a name="l01593"></a><a class="code" href="classopenni_1_1_playback_control.html#a5dfee4f2341dc847b6a9d9e0b5319a1f">01593</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_playback_control.html#a5dfee4f2341dc847b6a9d9e0b5319a1f">getSpeed</a>()<span class="keyword"> const</span>
<a name="l01594"></a>01594 <span class="keyword">    </span>{
<a name="l01595"></a>01595         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01596"></a>01596         {
<a name="l01597"></a>01597             <span class="keywordflow">return</span> 0.0f;
<a name="l01598"></a>01598         }
<a name="l01599"></a>01599         <span class="keywordtype">float</span> speed;
<a name="l01600"></a>01600         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>&lt;<span class="keywordtype">float</span>&gt;(DEVICE_PROPERTY_PLAYBACK_SPEED, &amp;speed);
<a name="l01601"></a>01601         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01602"></a>01602         {
<a name="l01603"></a>01603             <span class="keywordflow">return</span> 1.0f;
<a name="l01604"></a>01604         }
<a name="l01605"></a>01605         <span class="keywordflow">return</span> speed;
<a name="l01606"></a>01606     }
<a name="l01614"></a><a class="code" href="classopenni_1_1_playback_control.html#a3ba6436562df82179e118296f3c897ee">01614</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#a3ba6436562df82179e118296f3c897ee">setSpeed</a>(<span class="keywordtype">float</span> speed)
<a name="l01615"></a>01615     {
<a name="l01616"></a>01616         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01617"></a>01617         {
<a name="l01618"></a>01618             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01619"></a>01619         }
<a name="l01620"></a>01620         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>&lt;<span class="keywordtype">float</span>&gt;(DEVICE_PROPERTY_PLAYBACK_SPEED, speed);
<a name="l01621"></a>01621     }
<a name="l01622"></a>01622 
<a name="l01628"></a><a class="code" href="classopenni_1_1_playback_control.html#a81ea2303199474834e12407b4752fb3a">01628</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_playback_control.html#a81ea2303199474834e12407b4752fb3a">getRepeatEnabled</a>()<span class="keyword"> const</span>
<a name="l01629"></a>01629 <span class="keyword">    </span>{
<a name="l01630"></a>01630         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01631"></a>01631         {
<a name="l01632"></a>01632             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01633"></a>01633         }
<a name="l01634"></a>01634 
<a name="l01635"></a>01635         OniBool repeat;
<a name="l01636"></a>01636         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>&lt;OniBool&gt;(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED, &amp;repeat);
<a name="l01637"></a>01637         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01638"></a>01638         {
<a name="l01639"></a>01639             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01640"></a>01640         }
<a name="l01641"></a>01641 
<a name="l01642"></a>01642         <span class="keywordflow">return</span> repeat == TRUE;
<a name="l01643"></a>01643     }
<a name="l01644"></a>01644 
<a name="l01653"></a><a class="code" href="classopenni_1_1_playback_control.html#ab0c377c5276294889e2562acb8163d30">01653</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#ab0c377c5276294889e2562acb8163d30">setRepeatEnabled</a>(<span class="keywordtype">bool</span> repeat)
<a name="l01654"></a>01654     {
<a name="l01655"></a>01655         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01656"></a>01656         {
<a name="l01657"></a>01657             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01658"></a>01658         }
<a name="l01659"></a>01659 
<a name="l01660"></a>01660         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>&lt;OniBool&gt;(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED, repeat ? TRUE : FALSE);
<a name="l01661"></a>01661     }
<a name="l01662"></a>01662 
<a name="l01673"></a><a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">01673</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">seek</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream, <span class="keywordtype">int</span> frameIndex)
<a name="l01674"></a>01674     {
<a name="l01675"></a>01675         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01676"></a>01676         {
<a name="l01677"></a>01677             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01678"></a>01678         }
<a name="l01679"></a>01679         OniSeek <a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">seek</a>;
<a name="l01680"></a>01680         seek.frameIndex = frameIndex;
<a name="l01681"></a>01681         seek.stream = stream._getHandle();
<a name="l01682"></a>01682         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#afd15b1d2c875bf224a8b1f45b889d680">invoke</a>(DEVICE_COMMAND_SEEK, seek);
<a name="l01683"></a>01683     }
<a name="l01684"></a>01684 
<a name="l01693"></a><a class="code" href="classopenni_1_1_playback_control.html#a16916573c6a11d1112444222c5f31158">01693</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_playback_control.html#a16916573c6a11d1112444222c5f31158">getNumberOfFrames</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream)<span class="keyword"> const</span>
<a name="l01694"></a>01694 <span class="keyword">    </span>{
<a name="l01695"></a>01695         <span class="keywordtype">int</span> numOfFrames = -1;
<a name="l01696"></a>01696         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = stream.<a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>&lt;<span class="keywordtype">int</span>&gt;(STREAM_PROPERTY_NUMBER_OF_FRAMES, &amp;numOfFrames);
<a name="l01697"></a>01697         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01698"></a>01698         {
<a name="l01699"></a>01699             <span class="keywordflow">return</span> 0;
<a name="l01700"></a>01700         }
<a name="l01701"></a>01701         <span class="keywordflow">return</span> numOfFrames;
<a name="l01702"></a>01702     }
<a name="l01703"></a>01703 
<a name="l01704"></a><a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">01704</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>()<span class="keyword"> const</span>
<a name="l01705"></a>01705 <span class="keyword">    </span>{
<a name="l01706"></a>01706         <span class="keywordflow">return</span> m_pDevice != NULL;
<a name="l01707"></a>01707     }
<a name="l01708"></a>01708 <span class="keyword">private</span>:
<a name="l01709"></a>01709     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> attach(<a class="code" href="classopenni_1_1_device.html">Device</a>* device)
<a name="l01710"></a>01710     {
<a name="l01711"></a>01711         <span class="keywordflow">if</span> (!device-&gt;<a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>() || !device-&gt;<a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>())
<a name="l01712"></a>01712         {
<a name="l01713"></a>01713             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l01714"></a>01714         }
<a name="l01715"></a>01715 
<a name="l01716"></a>01716         detach();
<a name="l01717"></a>01717         m_pDevice = device;
<a name="l01718"></a>01718 
<a name="l01719"></a>01719         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l01720"></a>01720     }
<a name="l01721"></a>01721     <span class="keywordtype">void</span> detach()
<a name="l01722"></a>01722     {
<a name="l01723"></a>01723         m_pDevice = NULL;
<a name="l01724"></a>01724     }
<a name="l01725"></a>01725 
<a name="l01726"></a><a class="code" href="classopenni_1_1_playback_control.html#a520fa05e0bf58785da428f7a0241eee2">01726</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l01727"></a>01727     <a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>(<a class="code" href="classopenni_1_1_device.html">Device</a>* pDevice) : m_pDevice(NULL)
<a name="l01728"></a>01728     {
<a name="l01729"></a>01729         <span class="keywordflow">if</span> (pDevice != NULL)
<a name="l01730"></a>01730         {
<a name="l01731"></a>01731             attach(pDevice);
<a name="l01732"></a>01732         }
<a name="l01733"></a>01733     }
<a name="l01734"></a>01734 
<a name="l01735"></a>01735     <a class="code" href="classopenni_1_1_playback_control.html#a520fa05e0bf58785da428f7a0241eee2">Device</a>* m_pDevice;
<a name="l01736"></a>01736 };
<a name="l01737"></a>01737 
<a name="l01738"></a><a class="code" href="classopenni_1_1_camera_settings.html">01738</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>
<a name="l01739"></a>01739 {
<a name="l01740"></a>01740 <span class="keyword">public</span>:
<a name="l01741"></a>01741     <span class="comment">// setters</span>
<a name="l01742"></a><a class="code" href="classopenni_1_1_camera_settings.html#a0d5aba4f0ff486640504f789cfd48266">01742</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a0d5aba4f0ff486640504f789cfd48266">setAutoExposureEnabled</a>(<span class="keywordtype">bool</span> enabled)
<a name="l01743"></a>01743     {
<a name="l01744"></a>01744         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_AUTO_EXPOSURE, enabled ? TRUE : FALSE);
<a name="l01745"></a>01745     }
<a name="l01746"></a><a class="code" href="classopenni_1_1_camera_settings.html#a93e2a514c334edbaa07efa680dc8b93a">01746</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a93e2a514c334edbaa07efa680dc8b93a">setAutoWhiteBalanceEnabled</a>(<span class="keywordtype">bool</span> enabled)
<a name="l01747"></a>01747     {
<a name="l01748"></a>01748         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_AUTO_WHITE_BALANCE, enabled ? TRUE : FALSE);
<a name="l01749"></a>01749     }
<a name="l01750"></a>01750 
<a name="l01751"></a><a class="code" href="classopenni_1_1_camera_settings.html#aa0d08435915fcb1f4e61c0eec9ba74f9">01751</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#aa0d08435915fcb1f4e61c0eec9ba74f9">getAutoExposureEnabled</a>()<span class="keyword"> const</span>
<a name="l01752"></a>01752 <span class="keyword">    </span>{
<a name="l01753"></a>01753         OniBool enabled = FALSE;
<a name="l01754"></a>01754 
<a name="l01755"></a>01755         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_AUTO_EXPOSURE, &amp;enabled);
<a name="l01756"></a>01756         <span class="keywordflow">return</span> rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a> &amp;&amp; enabled == TRUE;
<a name="l01757"></a>01757     }
<a name="l01758"></a><a class="code" href="classopenni_1_1_camera_settings.html#a3672348680d77471408fcb3b733f1d5b">01758</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#a3672348680d77471408fcb3b733f1d5b">getAutoWhiteBalanceEnabled</a>()<span class="keyword"> const</span>
<a name="l01759"></a>01759 <span class="keyword">    </span>{
<a name="l01760"></a>01760         OniBool enabled = FALSE;
<a name="l01761"></a>01761 
<a name="l01762"></a>01762         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_AUTO_WHITE_BALANCE, &amp;enabled);
<a name="l01763"></a>01763         <span class="keywordflow">return</span> rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a> &amp;&amp; enabled == TRUE;
<a name="l01764"></a>01764     }
<a name="l01765"></a>01765 
<a name="l01766"></a><a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">01766</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pStream != NULL;}
<a name="l01767"></a>01767 <span class="keyword">private</span>:
<a name="l01768"></a>01768     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01769"></a>01769     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> getProperty(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01770"></a>01770 <span class="keyword">    </span>{
<a name="l01771"></a>01771         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()) <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333adf334ec01f8b7b2d7a8593c488690475">STATUS_NOT_SUPPORTED</a>;
<a name="l01772"></a>01772 
<a name="l01773"></a>01773         <span class="keywordflow">return</span> m_pStream-&gt;<a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>&lt;T&gt;(propertyId, value);
<a name="l01774"></a>01774     }
<a name="l01775"></a>01775     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01776"></a>01776     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> setProperty(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01777"></a>01777     {
<a name="l01778"></a>01778         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()) <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333adf334ec01f8b7b2d7a8593c488690475">STATUS_NOT_SUPPORTED</a>;
<a name="l01779"></a>01779 
<a name="l01780"></a>01780         <span class="keywordflow">return</span> m_pStream-&gt;<a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>&lt;T&gt;(propertyId, value);
<a name="l01781"></a>01781     }
<a name="l01782"></a>01782 
<a name="l01783"></a><a class="code" href="classopenni_1_1_camera_settings.html#a4fd1028f691947151ea08e0db214f01c">01783</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l01784"></a>01784     <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>* pStream)
<a name="l01785"></a>01785     {
<a name="l01786"></a>01786         m_pStream = pStream;
<a name="l01787"></a>01787     }
<a name="l01788"></a>01788 
<a name="l01789"></a>01789     <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>* m_pStream;
<a name="l01790"></a>01790 };
<a name="l01791"></a>01791 
<a name="l01792"></a>01792 
<a name="l01805"></a><a class="code" href="classopenni_1_1_open_n_i.html">01805</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>
<a name="l01806"></a>01806 {
<a name="l01807"></a>01807 <span class="keyword">public</span>:
<a name="l01808"></a>01808 
<a name="l01824"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">01824</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>
<a name="l01825"></a>01825     {
<a name="l01826"></a>01826     <span class="keyword">public</span>:
<a name="l01827"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a71eda2ded9fd9334bf4ed424b1b27abc">01827</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a71eda2ded9fd9334bf4ed424b1b27abc">DeviceConnectedListener</a>()
<a name="l01828"></a>01828         {
<a name="l01829"></a>01829             m_deviceConnectedCallbacks.deviceConnected = deviceConnectedCallback;
<a name="l01830"></a>01830             m_deviceConnectedCallbacks.deviceDisconnected = NULL;
<a name="l01831"></a>01831             m_deviceConnectedCallbacks.deviceStateChanged = NULL;
<a name="l01832"></a>01832             m_deviceConnectedCallbacksHandle = NULL;
<a name="l01833"></a>01833         }
<a name="l01845"></a>01845         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#aba6dd6e8cad373476c7715453a7155fd">onDeviceConnected</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*) = 0;
<a name="l01846"></a>01846     <span class="keyword">private</span>:
<a name="l01847"></a>01847         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceConnectedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, <span class="keywordtype">void</span>* pCookie)
<a name="l01848"></a>01848         {
<a name="l01849"></a>01849             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>*)pCookie;
<a name="l01850"></a>01850             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#aba6dd6e8cad373476c7715453a7155fd">onDeviceConnected</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo));
<a name="l01851"></a>01851         }
<a name="l01852"></a>01852 
<a name="l01853"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">01853</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l01854"></a>01854         OniDeviceCallbacks m_deviceConnectedCallbacks;
<a name="l01855"></a>01855         OniCallbackHandle m_deviceConnectedCallbacksHandle;
<a name="l01856"></a>01856 
<a name="l01857"></a>01857     };
<a name="l01874"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">01874</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>
<a name="l01875"></a>01875     {
<a name="l01876"></a>01876     <span class="keyword">public</span>:
<a name="l01877"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#aad1e5260e540209672440d621c9cd6ed">01877</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#aad1e5260e540209672440d621c9cd6ed">DeviceDisconnectedListener</a>()
<a name="l01878"></a>01878         {
<a name="l01879"></a>01879             m_deviceDisconnectedCallbacks.deviceConnected = NULL;
<a name="l01880"></a>01880             m_deviceDisconnectedCallbacks.deviceDisconnected = deviceDisconnectedCallback;
<a name="l01881"></a>01881             m_deviceDisconnectedCallbacks.deviceStateChanged = NULL;
<a name="l01882"></a>01882             m_deviceDisconnectedCallbacksHandle = NULL;
<a name="l01883"></a>01883         }
<a name="l01892"></a>01892         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a93cce4849be363185d58867b63400057">onDeviceDisconnected</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*) = 0;
<a name="l01893"></a>01893     <span class="keyword">private</span>:
<a name="l01894"></a>01894         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceDisconnectedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, <span class="keywordtype">void</span>* pCookie)
<a name="l01895"></a>01895         {
<a name="l01896"></a>01896             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>*)pCookie;
<a name="l01897"></a>01897             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a93cce4849be363185d58867b63400057">onDeviceDisconnected</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo));
<a name="l01898"></a>01898         }
<a name="l01899"></a>01899 
<a name="l01900"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">01900</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l01901"></a>01901         OniDeviceCallbacks m_deviceDisconnectedCallbacks;
<a name="l01902"></a>01902         OniCallbackHandle m_deviceDisconnectedCallbacksHandle;
<a name="l01903"></a>01903     };
<a name="l01917"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">01917</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>
<a name="l01918"></a>01918     {
<a name="l01919"></a>01919     <span class="keyword">public</span>:
<a name="l01920"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a66553a13dce2ffb59dc85d71f5104020">01920</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a66553a13dce2ffb59dc85d71f5104020">DeviceStateChangedListener</a>()
<a name="l01921"></a>01921         {
<a name="l01922"></a>01922             m_deviceStateChangedCallbacks.deviceConnected = NULL;
<a name="l01923"></a>01923             m_deviceStateChangedCallbacks.deviceDisconnected = NULL;
<a name="l01924"></a>01924             m_deviceStateChangedCallbacks.deviceStateChanged = deviceStateChangedCallback;
<a name="l01925"></a>01925             m_deviceStateChangedCallbacksHandle = NULL;
<a name="l01926"></a>01926         }
<a name="l01933"></a>01933         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a311b3d677811a45e247553ac02d932b7">onDeviceStateChanged</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*, <a class="code" href="namespaceopenni.html#aeec58c3f4271cc66959b44fa27b10534">DeviceState</a>) = 0;
<a name="l01934"></a>01934     <span class="keyword">private</span>:
<a name="l01935"></a>01935         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceStateChangedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, OniDeviceState state, <span class="keywordtype">void</span>* pCookie)
<a name="l01936"></a>01936         {
<a name="l01937"></a>01937             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>*)pCookie;
<a name="l01938"></a>01938             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a311b3d677811a45e247553ac02d932b7">onDeviceStateChanged</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo), <a class="code" href="namespaceopenni.html#aeec58c3f4271cc66959b44fa27b10534">DeviceState</a>(state));
<a name="l01939"></a>01939         }
<a name="l01940"></a>01940 
<a name="l01941"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">01941</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l01942"></a>01942         OniDeviceCallbacks m_deviceStateChangedCallbacks;
<a name="l01943"></a>01943         OniCallbackHandle m_deviceStateChangedCallbacksHandle;
<a name="l01944"></a>01944     };
<a name="l01945"></a>01945 
<a name="l01951"></a><a class="code" href="classopenni_1_1_open_n_i.html#a0f374c05978a3373f1060c288997d8ca">01951</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a0f374c05978a3373f1060c288997d8ca">initialize</a>()
<a name="l01952"></a>01952     {
<a name="l01953"></a>01953         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniInitialize(ONI_API_VERSION); <span class="comment">// provide version of API, to make sure proper struct sizes are used</span>
<a name="l01954"></a>01954     }
<a name="l01955"></a>01955 
<a name="l01960"></a><a class="code" href="classopenni_1_1_open_n_i.html#a1a3fb2a487849cc591373aa3f88a7edc">01960</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#a1a3fb2a487849cc591373aa3f88a7edc">shutdown</a>()
<a name="l01961"></a>01961     {
<a name="l01962"></a>01962         oniShutdown();
<a name="l01963"></a>01963     }
<a name="l01964"></a>01964 
<a name="l01968"></a><a class="code" href="classopenni_1_1_open_n_i.html#aab96e01582123921bdb223d936393d07">01968</a>     <span class="keyword">static</span> <a class="code" href="structopenni_1_1_version.html">Version</a> <a class="code" href="classopenni_1_1_open_n_i.html#aab96e01582123921bdb223d936393d07">getVersion</a>()
<a name="l01969"></a>01969     {
<a name="l01970"></a>01970         OniVersion version = oniGetVersion();
<a name="l01971"></a>01971         <span class="keyword">union</span>
<a name="l01972"></a>01972         {
<a name="l01973"></a>01973             OniVersion* pC;
<a name="l01974"></a>01974             <a class="code" href="structopenni_1_1_version.html">Version</a>* pCpp;
<a name="l01975"></a>01975         } a;
<a name="l01976"></a>01976         a.pC = &amp;version;
<a name="l01977"></a>01977         <span class="keywordflow">return</span> *a.pCpp;
<a name="l01978"></a>01978     }
<a name="l01979"></a>01979 
<a name="l01987"></a><a class="code" href="classopenni_1_1_open_n_i.html#a01fd4df5c93eaf9a9437bbc4c942130a">01987</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_open_n_i.html#a01fd4df5c93eaf9a9437bbc4c942130a">getExtendedError</a>()
<a name="l01988"></a>01988     {
<a name="l01989"></a>01989         <span class="keywordflow">return</span> oniGetExtendedError();
<a name="l01990"></a>01990     }
<a name="l01991"></a>01991 
<a name="l01996"></a><a class="code" href="classopenni_1_1_open_n_i.html#aef1804963ffbe476be41f9c2c09ee99e">01996</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#aef1804963ffbe476be41f9c2c09ee99e">enumerateDevices</a>(<a class="code" href="classopenni_1_1_array.html">Array&lt;DeviceInfo&gt;</a>* deviceInfoList)
<a name="l01997"></a>01997     {
<a name="l01998"></a>01998         OniDeviceInfo* m_pDeviceInfos;
<a name="l01999"></a>01999         <span class="keywordtype">int</span> m_deviceInfoCount;
<a name="l02000"></a>02000         oniGetDeviceList(&amp;m_pDeviceInfos, &amp;m_deviceInfoCount);
<a name="l02001"></a>02001         deviceInfoList-&gt;_setData((<a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*)m_pDeviceInfos, m_deviceInfoCount, <span class="keyword">true</span>);
<a name="l02002"></a>02002         oniReleaseDeviceList(m_pDeviceInfos);
<a name="l02003"></a>02003     }
<a name="l02004"></a>02004 
<a name="l02013"></a><a class="code" href="classopenni_1_1_open_n_i.html#ad0e287ef86221db74055c3e928c9adf2">02013</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#ad0e287ef86221db74055c3e928c9adf2">waitForAnyStream</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>** pStreams, <span class="keywordtype">int</span> streamCount, <span class="keywordtype">int</span>* pReadyStreamIndex, <span class="keywordtype">int</span> timeout = <a class="code" href="namespaceopenni.html#a606771f15b60eaf092fa71378787bd66">TIMEOUT_FOREVER</a>)
<a name="l02014"></a>02014     {
<a name="l02015"></a>02015         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> ONI_MAX_STREAMS = 50;
<a name="l02016"></a>02016         OniStreamHandle streams[ONI_MAX_STREAMS];
<a name="l02017"></a>02017 
<a name="l02018"></a>02018         <span class="keywordflow">if</span> (streamCount &gt; ONI_MAX_STREAMS)
<a name="l02019"></a>02019         {
<a name="l02020"></a>02020             printf(<span class="stringliteral">&quot;Too many streams for wait: %d &gt; %d\n&quot;</span>, streamCount, ONI_MAX_STREAMS);
<a name="l02021"></a>02021             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac9368d475a09338730d0c93ffb5cdcb4">STATUS_BAD_PARAMETER</a>;
<a name="l02022"></a>02022         }
<a name="l02023"></a>02023 
<a name="l02024"></a>02024         *pReadyStreamIndex = -1;
<a name="l02025"></a>02025         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; streamCount; ++i)
<a name="l02026"></a>02026         {
<a name="l02027"></a>02027             <span class="keywordflow">if</span> (pStreams[i] != NULL)
<a name="l02028"></a>02028             {
<a name="l02029"></a>02029                 streams[i] = pStreams[i]-&gt;_getHandle();
<a name="l02030"></a>02030             }
<a name="l02031"></a>02031             <span class="keywordflow">else</span>
<a name="l02032"></a>02032             {
<a name="l02033"></a>02033                 streams[i] = NULL;
<a name="l02034"></a>02034             }
<a name="l02035"></a>02035         }
<a name="l02036"></a>02036         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniWaitForAnyStream(streams, streamCount, pReadyStreamIndex, timeout);
<a name="l02037"></a>02037 
<a name="l02038"></a>02038         <span class="keywordflow">return</span> rc;
<a name="l02039"></a>02039     }
<a name="l02040"></a>02040 
<a name="l02048"></a><a class="code" href="classopenni_1_1_open_n_i.html#a134e63dd470532118c4d9d06496fa910">02048</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a134e63dd470532118c4d9d06496fa910">addDeviceConnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener)
<a name="l02049"></a>02049     {
<a name="l02050"></a>02050         <span class="keywordflow">if</span> (pListener-&gt;m_deviceConnectedCallbacksHandle != NULL)
<a name="l02051"></a>02051         {
<a name="l02052"></a>02052             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02053"></a>02053         }
<a name="l02054"></a>02054         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceConnectedCallbacks, pListener, &amp;pListener-&gt;m_deviceConnectedCallbacksHandle);
<a name="l02055"></a>02055     }
<a name="l02063"></a><a class="code" href="classopenni_1_1_open_n_i.html#a92e84cbd6623beb7bc7438ab3e499a15">02063</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a92e84cbd6623beb7bc7438ab3e499a15">addDeviceDisconnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener)
<a name="l02064"></a>02064     {
<a name="l02065"></a>02065         <span class="keywordflow">if</span> (pListener-&gt;m_deviceDisconnectedCallbacksHandle != NULL)
<a name="l02066"></a>02066         {
<a name="l02067"></a>02067             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02068"></a>02068         }
<a name="l02069"></a>02069         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceDisconnectedCallbacks, pListener, &amp;pListener-&gt;m_deviceDisconnectedCallbacksHandle);
<a name="l02070"></a>02070     }
<a name="l02078"></a><a class="code" href="classopenni_1_1_open_n_i.html#aa810e1ed0639e76d90d6b110283518d3">02078</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#aa810e1ed0639e76d90d6b110283518d3">addDeviceStateChangedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener)
<a name="l02079"></a>02079     {
<a name="l02080"></a>02080         <span class="keywordflow">if</span> (pListener-&gt;m_deviceStateChangedCallbacksHandle != NULL)
<a name="l02081"></a>02081         {
<a name="l02082"></a>02082             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02083"></a>02083         }
<a name="l02084"></a>02084         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceStateChangedCallbacks, pListener, &amp;pListener-&gt;m_deviceStateChangedCallbacksHandle);
<a name="l02085"></a>02085     }
<a name="l02093"></a><a class="code" href="classopenni_1_1_open_n_i.html#a350f5989882cbf4b29dbbcae42003f54">02093</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#a350f5989882cbf4b29dbbcae42003f54">removeDeviceConnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener)
<a name="l02094"></a>02094     {
<a name="l02095"></a>02095         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceConnectedCallbacksHandle);
<a name="l02096"></a>02096         pListener-&gt;m_deviceConnectedCallbacksHandle = NULL;
<a name="l02097"></a>02097     }
<a name="l02105"></a><a class="code" href="classopenni_1_1_open_n_i.html#af68edcf05f1e50f620c13d5fb393f105">02105</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#af68edcf05f1e50f620c13d5fb393f105">removeDeviceDisconnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener)
<a name="l02106"></a>02106     {
<a name="l02107"></a>02107         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceDisconnectedCallbacksHandle);
<a name="l02108"></a>02108         pListener-&gt;m_deviceDisconnectedCallbacksHandle = NULL;
<a name="l02109"></a>02109     }
<a name="l02117"></a><a class="code" href="classopenni_1_1_open_n_i.html#acab32726b8f7b9a2d7619ce9be3b7da2">02117</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#acab32726b8f7b9a2d7619ce9be3b7da2">removeDeviceStateChangedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener)
<a name="l02118"></a>02118     {
<a name="l02119"></a>02119         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceStateChangedCallbacksHandle);
<a name="l02120"></a>02120         pListener-&gt;m_deviceStateChangedCallbacksHandle = NULL;
<a name="l02121"></a>02121     }
<a name="l02122"></a>02122 <span class="keyword">private</span>:
<a name="l02123"></a>02123     <a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>()
<a name="l02124"></a>02124     {
<a name="l02125"></a>02125     }
<a name="l02126"></a>02126 };
<a name="l02127"></a>02127 
<a name="l02163"></a><a class="code" href="classopenni_1_1_coordinate_converter.html">02163</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_coordinate_converter.html">CoordinateConverter</a>
<a name="l02164"></a>02164 {
<a name="l02165"></a>02165 <span class="keyword">public</span>:
<a name="l02176"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">02176</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">convertWorldToDepth</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> worldX, <span class="keywordtype">float</span> worldY, <span class="keywordtype">float</span> worldZ, <span class="keywordtype">int</span>* pDepthX, <span class="keywordtype">int</span>* pDepthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>* pDepthZ)
<a name="l02177"></a>02177     {
<a name="l02178"></a>02178         <span class="keywordtype">float</span> depthX, depthY, depthZ;
<a name="l02179"></a>02179         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterWorldToDepth(depthStream._getHandle(), worldX, worldY, worldZ, &amp;depthX, &amp;depthY, &amp;depthZ);
<a name="l02180"></a>02180         *pDepthX = (int)depthX;
<a name="l02181"></a>02181         *pDepthY = (int)depthY;
<a name="l02182"></a>02182         *pDepthZ = (<a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>)depthZ;
<a name="l02183"></a>02183         <span class="keywordflow">return</span> rc;
<a name="l02184"></a>02184     }
<a name="l02185"></a>02185 
<a name="l02196"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a8a68229388b168a836c3fe709f2ef953">02196</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">convertWorldToDepth</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> worldX, <span class="keywordtype">float</span> worldY, <span class="keywordtype">float</span> worldZ, <span class="keywordtype">float</span>* pDepthX, <span class="keywordtype">float</span>* pDepthY, <span class="keywordtype">float</span>* pDepthZ)
<a name="l02197"></a>02197     {
<a name="l02198"></a>02198         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterWorldToDepth(depthStream._getHandle(), worldX, worldY, worldZ, pDepthX, pDepthY, pDepthZ);
<a name="l02199"></a>02199     }
<a name="l02200"></a>02200 
<a name="l02211"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">02211</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">convertDepthToWorld</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">int</span> depthX, <span class="keywordtype">int</span> depthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a> depthZ, <span class="keywordtype">float</span>* pWorldX, <span class="keywordtype">float</span>* pWorldY, <span class="keywordtype">float</span>* pWorldZ)
<a name="l02212"></a>02212     {
<a name="l02213"></a>02213         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToWorld(depthStream._getHandle(), float(depthX), float(depthY), float(depthZ), pWorldX, pWorldY, pWorldZ);
<a name="l02214"></a>02214     }
<a name="l02215"></a>02215 
<a name="l02226"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a5d934a92602a069c703c0640cd776aeb">02226</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">convertDepthToWorld</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> depthX, <span class="keywordtype">float</span> depthY, <span class="keywordtype">float</span> depthZ, <span class="keywordtype">float</span>* pWorldX, <span class="keywordtype">float</span>* pWorldY, <span class="keywordtype">float</span>* pWorldZ)
<a name="l02227"></a>02227     {
<a name="l02228"></a>02228         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToWorld(depthStream._getHandle(), depthX, depthY, depthZ, pWorldX, pWorldY, pWorldZ);
<a name="l02229"></a>02229     }
<a name="l02230"></a>02230 
<a name="l02242"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a4faabf558f2eb6e27948e50bffa8f581">02242</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a4faabf558f2eb6e27948e50bffa8f581">convertDepthToColor</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; colorStream, <span class="keywordtype">int</span> depthX, <span class="keywordtype">int</span> depthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a> depthZ, <span class="keywordtype">int</span>* pColorX, <span class="keywordtype">int</span>* pColorY)
<a name="l02243"></a>02243     {
<a name="l02244"></a>02244         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToColor(depthStream._getHandle(), colorStream._getHandle(), depthX, depthY, depthZ, pColorX, pColorY);
<a name="l02245"></a>02245     }
<a name="l02246"></a>02246 };
<a name="l02247"></a>02247 
<a name="l02262"></a><a class="code" href="classopenni_1_1_recorder.html">02262</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_recorder.html">Recorder</a>
<a name="l02263"></a>02263 {
<a name="l02264"></a>02264 <span class="keyword">public</span>:
<a name="l02269"></a><a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">02269</a>     <a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">Recorder</a>() : m_recorder(NULL)
<a name="l02270"></a>02270     {
<a name="l02271"></a>02271     }
<a name="l02272"></a>02272 
<a name="l02276"></a><a class="code" href="classopenni_1_1_recorder.html#a4452268d371108c3b670d7527efae3d0">02276</a>     <a class="code" href="classopenni_1_1_recorder.html#a4452268d371108c3b670d7527efae3d0">~Recorder</a>()
<a name="l02277"></a>02277     {
<a name="l02278"></a>02278         <a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">destroy</a>();
<a name="l02279"></a>02279     }
<a name="l02280"></a>02280 
<a name="l02292"></a><a class="code" href="classopenni_1_1_recorder.html#a7e0865a077fcc968427977d2063884ec">02292</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#a7e0865a077fcc968427977d2063884ec">create</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* fileName)
<a name="l02293"></a>02293     {
<a name="l02294"></a>02294         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02295"></a>02295         {
<a name="l02296"></a>02296             <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCreateRecorder(fileName, &amp;m_recorder);
<a name="l02297"></a>02297         }
<a name="l02298"></a>02298         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02299"></a>02299     }
<a name="l02300"></a>02300 
<a name="l02307"></a><a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">02307</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>()<span class="keyword"> const</span>
<a name="l02308"></a>02308 <span class="keyword">    </span>{
<a name="l02309"></a>02309         <span class="keywordflow">return</span> NULL != getHandle();
<a name="l02310"></a>02310     }
<a name="l02311"></a>02311 
<a name="l02322"></a><a class="code" href="classopenni_1_1_recorder.html#ab5351b4642fd738147feca2d7e5e2565">02322</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#ab5351b4642fd738147feca2d7e5e2565">attach</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream, <span class="keywordtype">bool</span> allowLossyCompression = <span class="keyword">false</span>)
<a name="l02323"></a>02323     {
<a name="l02324"></a>02324         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>() || !stream.<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l02325"></a>02325         {
<a name="l02326"></a>02326             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02327"></a>02327         }
<a name="l02328"></a>02328         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRecorderAttachStream(
<a name="l02329"></a>02329                 m_recorder,
<a name="l02330"></a>02330                 stream._getHandle(),
<a name="l02331"></a>02331                 allowLossyCompression);
<a name="l02332"></a>02332     }
<a name="l02333"></a>02333 
<a name="l02340"></a><a class="code" href="classopenni_1_1_recorder.html#af9e22ae7bb59250cf97db34cf067da5a">02340</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#af9e22ae7bb59250cf97db34cf067da5a">start</a>()
<a name="l02341"></a>02341     {
<a name="l02342"></a>02342         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02343"></a>02343         {
<a name="l02344"></a>02344             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02345"></a>02345         }
<a name="l02346"></a>02346         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRecorderStart(m_recorder);
<a name="l02347"></a>02347     }
<a name="l02348"></a>02348 
<a name="l02352"></a><a class="code" href="classopenni_1_1_recorder.html#a5912dcb5b76623a1bfdc53e97fe9dc03">02352</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_recorder.html#a5912dcb5b76623a1bfdc53e97fe9dc03">stop</a>()
<a name="l02353"></a>02353     {
<a name="l02354"></a>02354         <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02355"></a>02355         {
<a name="l02356"></a>02356             oniRecorderStop(m_recorder);
<a name="l02357"></a>02357         }
<a name="l02358"></a>02358     }
<a name="l02359"></a>02359 
<a name="l02363"></a><a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">02363</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">destroy</a>()
<a name="l02364"></a>02364     {
<a name="l02365"></a>02365         <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02366"></a>02366         {
<a name="l02367"></a>02367             oniRecorderDestroy(&amp;m_recorder);
<a name="l02368"></a>02368         }
<a name="l02369"></a>02369     }
<a name="l02370"></a>02370 
<a name="l02371"></a>02371 <span class="keyword">private</span>:
<a name="l02372"></a>02372     <a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">Recorder</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp;);
<a name="l02373"></a>02373     <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp;);
<a name="l02374"></a>02374 
<a name="l02378"></a>02378     OniRecorderHandle getHandle()<span class="keyword"> const</span>
<a name="l02379"></a>02379 <span class="keyword">    </span>{
<a name="l02380"></a>02380         <span class="keywordflow">return</span> m_recorder;
<a name="l02381"></a>02381     }
<a name="l02382"></a>02382 
<a name="l02383"></a>02383 
<a name="l02384"></a>02384     OniRecorderHandle m_recorder;
<a name="l02385"></a>02385 };
<a name="l02386"></a>02386 
<a name="l02387"></a>02387 <span class="comment">// Implemetation</span>
<a name="l02388"></a><a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">02388</a> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">VideoStream::create</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; device, <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l02389"></a>02389 {
<a name="l02390"></a>02390     OniStreamHandle streamHandle;
<a name="l02391"></a>02391     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceCreateStream(device._getHandle(), (OniSensorType)sensorType, &amp;streamHandle);
<a name="l02392"></a>02392     <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l02393"></a>02393     {
<a name="l02394"></a>02394         <span class="keywordflow">return</span> rc;
<a name="l02395"></a>02395     }
<a name="l02396"></a>02396 
<a name="l02397"></a>02397     _setHandle(streamHandle);
<a name="l02398"></a>02398 
<a name="l02399"></a>02399     <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_AUTO_WHITE_BALANCE) &amp;&amp; <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_AUTO_EXPOSURE))
<a name="l02400"></a>02400     {
<a name="l02401"></a>02401         m_pCameraSettings = <span class="keyword">new</span> <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>(<span class="keyword">this</span>);
<a name="l02402"></a>02402     }
<a name="l02403"></a>02403 
<a name="l02404"></a>02404     <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02405"></a>02405 }
<a name="l02406"></a>02406 
<a name="l02407"></a><a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">02407</a> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">VideoStream::destroy</a>()
<a name="l02408"></a>02408 {
<a name="l02409"></a>02409     <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l02410"></a>02410     {
<a name="l02411"></a>02411         <span class="keywordflow">return</span>;
<a name="l02412"></a>02412     }
<a name="l02413"></a>02413 
<a name="l02414"></a>02414     <span class="keywordflow">if</span> (m_pCameraSettings != NULL)
<a name="l02415"></a>02415     {
<a name="l02416"></a>02416         <span class="keyword">delete</span> m_pCameraSettings;
<a name="l02417"></a>02417         m_pCameraSettings = NULL;
<a name="l02418"></a>02418     }
<a name="l02419"></a>02419 
<a name="l02420"></a>02420     <span class="keywordflow">if</span> (m_stream != NULL)
<a name="l02421"></a>02421     {
<a name="l02422"></a>02422         oniStreamDestroy(m_stream);
<a name="l02423"></a>02423         m_stream = NULL;
<a name="l02424"></a>02424     }
<a name="l02425"></a>02425 }
<a name="l02426"></a>02426 
<a name="l02427"></a><a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">02427</a> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">Device::open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* uri)
<a name="l02428"></a>02428 {
<a name="l02429"></a>02429     OniDeviceHandle deviceHandle;
<a name="l02430"></a>02430     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceOpen(uri, &amp;deviceHandle);
<a name="l02431"></a>02431     <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l02432"></a>02432     {
<a name="l02433"></a>02433         <span class="keywordflow">return</span> rc;
<a name="l02434"></a>02434     }
<a name="l02435"></a>02435 
<a name="l02436"></a>02436     _setHandle(deviceHandle);
<a name="l02437"></a>02437 
<a name="l02438"></a>02438     <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>())
<a name="l02439"></a>02439     {
<a name="l02440"></a>02440         m_pPlaybackControl = <span class="keyword">new</span> <a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>(<span class="keyword">this</span>);
<a name="l02441"></a>02441     }
<a name="l02442"></a>02442 
<a name="l02443"></a>02443     <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02444"></a>02444 }
<a name="l02445"></a>02445 
<a name="l02446"></a><a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">02446</a> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">Device::close</a>()
<a name="l02447"></a>02447 {
<a name="l02448"></a>02448     <span class="keywordflow">if</span> (m_pPlaybackControl != NULL)
<a name="l02449"></a>02449     {
<a name="l02450"></a>02450         <span class="keyword">delete</span> m_pPlaybackControl;
<a name="l02451"></a>02451         m_pPlaybackControl = NULL;
<a name="l02452"></a>02452     }
<a name="l02453"></a>02453 
<a name="l02454"></a>02454     <span class="keywordflow">if</span> (m_device != NULL)
<a name="l02455"></a>02455     {
<a name="l02456"></a>02456         oniDeviceClose(m_device);
<a name="l02457"></a>02457         m_device = NULL;
<a name="l02458"></a>02458     }
<a name="l02459"></a>02459 }
<a name="l02460"></a>02460 
<a name="l02461"></a>02461 
<a name="l02462"></a>02462 }
<a name="l02463"></a>02463 
<a name="l02464"></a>02464 <span class="preprocessor">#endif // _OPEN_NI_HPP_</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 7 2013 14:22:49 for OpenNI 2.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
